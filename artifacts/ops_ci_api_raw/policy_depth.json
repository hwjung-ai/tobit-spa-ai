{
  "time": "2026-01-20T02:49:01.750330",
  "code": 0,
  "message": "OK",
  "data": {
    "answer": "Multiple CI candidates",
    "blocks": [
      {
        "type": "text",
        "text": "Multiple candidates found"
      },
      {
        "type": "table",
        "columns": [
          "ci_id",
          "ci_code",
          "ci_name",
          "ci_type",
          "ci_subtype",
          "ci_category",
          "status",
          "location",
          "owner"
        ],
        "rows": [
          [
            "bf253be6-881c-4cc8-8ed8-a1c2c1f38356",
            "app-analytics-audit-04-1",
            "Analytics_App_Audit_04-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-b",
            "analytics-apps"
          ],
          [
            "64cf8131-ad3d-4618-bf37-ec74e5ace1ff",
            "app-analytics-audit-05-1",
            "Analytics_App_Audit_05-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-b",
            "analytics-apps"
          ],
          [
            "deda439d-90fb-483a-affe-fab678f4997b",
            "app-analytics-integration-03-1",
            "Analytics_App_Integration_03-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "analytics-apps"
          ],
          [
            "ef3fe5d5-83eb-4509-993b-6fe5995841e6",
            "app-analytics-pricing-05-2",
            "Analytics_App_Pricing_05-2",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "analytics-apps"
          ],
          [
            "c416dd9b-17c1-4079-8fc7-6db1bf91eda7",
            "app-analytics-report-01-1",
            "Analytics_App_Report_01-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "analytics-apps"
          ],
          [
            "5ef1f62c-a503-4c93-87f6-e69fc8f07c43",
            "app-analytics-scheduler-02-1",
            "Analytics_App_Scheduler_02-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-a",
            "analytics-apps"
          ],
          [
            "bbfd367f-5b15-4209-a47f-5a00ff7b778e",
            "app-apm-audit-03-3",
            "APM_App_Audit_03-3",
            "SW",
            "app",
            "application",
            "active",
            "zone-a",
            "apm-apps"
          ],
          [
            "64ba406d-9c27-4b97-b668-af38f091336e",
            "app-apm-integration-02-1",
            "APM_App_Integration_02-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-a",
            "apm-apps"
          ],
          [
            "e7576aff-6c86-4fae-b8b3-b6f07f7f3d4c",
            "app-apm-inventory-03-1",
            "APM_App_Inventory_03-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-b",
            "apm-apps"
          ],
          [
            "53d68ddc-2565-46d2-8f7d-835cdbc4382f",
            "app-apm-pricing-01-1",
            "APM_App_Pricing_01-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "apm-apps"
          ]
        ],
        "title": "CI candidates (primary endpoint)",
        "id": "ci-candidates-primary"
      }
    ],
    "trace": {
      "plan_raw": {
        "intent": "LOOKUP",
        "view": "IMPACT",
        "mode": "ci",
        "primary": {
          "keywords": [
            "app-erp-alert-01-1"
          ],
          "filters": [],
          "limit": 5
        },
        "secondary": {
          "keywords": [
            "app-erp-alert-01-1",
            "영향",
            "그래프를",
            "depth",
            "10으로"
          ],
          "filters": [],
          "limit": 5
        },
        "aggregate": {
          "group_by": [],
          "metrics": [],
          "filters": [],
          "scope": "ci",
          "top_n": 10
        },
        "graph": {
          "depth": 2,
          "limits": {
            "max_nodes": 200,
            "max_edges": 400,
            "max_paths": 25
          },
          "view": null
        },
        "output": {
          "blocks": [
            "chart",
            "network"
          ],
          "primary": "chart"
        },
        "metric": null,
        "history": {
          "enabled": false,
          "source": "event_log",
          "scope": "ci",
          "mode": "recent",
          "time_range": "last_7d",
          "limit": 50
        },
        "cep": null,
        "auto": {
          "views": [
            "NEIGHBORS"
          ],
          "depth_hint": null,
          "include_metric": false,
          "metric_mode": "aggregate",
          "include_history": false,
          "include_cep": false,
          "path": {
            "source_ci_code": null,
            "target_ci_code": null
          },
          "graph_scope": {
            "include_metric": false,
            "include_history": false
          }
        },
        "list": {
          "enabled": false,
          "limit": 50,
          "offset": 0
        },
        "normalized_from": null,
        "normalized_to": null,
        "steps": [],
        "branches": [],
        "loops": [],
        "budget": {
          "max_steps": 10,
          "max_depth": 5,
          "max_branches": 3,
          "max_iterations": 100,
          "timeout_seconds": null
        },
        "enable_multistep": false
      },
      "plan_validated": {
        "intent": "LOOKUP",
        "view": "IMPACT",
        "mode": "ci",
        "primary": {
          "keywords": [
            "app-erp-alert-01-1"
          ],
          "filters": [],
          "limit": 5
        },
        "secondary": {
          "keywords": [
            "app-erp-alert-01-1",
            "영향",
            "그래프를",
            "depth",
            "10으로"
          ],
          "filters": [],
          "limit": 5
        },
        "aggregate": {
          "group_by": [],
          "metrics": [],
          "filters": [],
          "scope": "ci",
          "top_n": 10
        },
        "graph": {
          "depth": 2,
          "limits": {
            "max_nodes": 200,
            "max_edges": 400,
            "max_paths": 25
          },
          "view": "IMPACT"
        },
        "output": {
          "blocks": [
            "chart",
            "network"
          ],
          "primary": "chart"
        },
        "metric": null,
        "history": {
          "enabled": false,
          "source": "event_log",
          "scope": "ci",
          "mode": "recent",
          "time_range": "last_7d",
          "limit": 50
        },
        "cep": null,
        "auto": {
          "views": [
            "NEIGHBORS"
          ],
          "depth_hint": null,
          "include_metric": false,
          "metric_mode": "aggregate",
          "include_history": false,
          "include_cep": false,
          "path": {
            "source_ci_code": null,
            "target_ci_code": null
          },
          "graph_scope": {
            "include_metric": false,
            "include_history": false
          }
        },
        "list": {
          "enabled": false,
          "limit": 50,
          "offset": 0
        },
        "normalized_from": null,
        "normalized_to": null,
        "steps": [],
        "branches": [],
        "loops": [],
        "budget": {
          "max_steps": 10,
          "max_depth": 5,
          "max_branches": 3,
          "max_iterations": 100,
          "timeout_seconds": null
        },
        "enable_multistep": false
      },
      "policy_decisions": {
        "view": "IMPACT",
        "requested_depth": 2,
        "clamped_depth": 2,
        "allowed_rel_types": [
          "DEPENDS_ON"
        ],
        "discovered_rel_types": []
      },
      "tool_calls": [
        {
          "tool": "ci.search",
          "elapsed_ms": 120,
          "input_params": {
            "keywords": [
              "app-erp-alert-01-1"
            ],
            "filter_count": 0,
            "limit": 5,
            "sort": null
          },
          "output_summary": {
            "keyword_count": 1,
            "filter_count": 0,
            "limit": 5,
            "sort_column": null,
            "row_count": 0
          },
          "error": null,
          "query_asset": null
        },
        {
          "tool": "ci.search",
          "elapsed_ms": 0,
          "input_params": {
            "keywords": [
              "app-erp-alert-01-1"
            ],
            "filter_count": 0,
            "limit": 5,
            "sort": null
          },
          "output_summary": {
            "keyword_count": 1,
            "filter_count": 0,
            "limit": 5,
            "sort_column": null,
            "row_count": 0
          },
          "error": null,
          "query_asset": null
        },
        {
          "tool": "ci.search_broad",
          "elapsed_ms": 140,
          "input_params": {},
          "output_summary": {
            "keyword_count": 5,
            "filter_count": 0,
            "limit": 10,
            "sort_column": null,
            "row_count": 10
          },
          "error": null,
          "query_asset": null
        }
      ],
      "references": [],
      "errors": [],
      "tenant_id": "t1",
      "trace_id": null,
      "parent_trace_id": null,
      "graph_expected_but_missing": true
    },
    "next_actions": [
      {
        "type": "rerun",
        "label": "app-analytics-audit-04-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "bf253be6-881c-4cc8-8ed8-a1c2c1f38356"
        }
      },
      {
        "type": "rerun",
        "label": "app-analytics-audit-05-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "64cf8131-ad3d-4618-bf37-ec74e5ace1ff"
        }
      },
      {
        "type": "rerun",
        "label": "app-analytics-integration-03-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "deda439d-90fb-483a-affe-fab678f4997b"
        }
      },
      {
        "type": "rerun",
        "label": "app-analytics-pricing-05-2 선택 (primary)",
        "payload": {
          "selected_ci_id": "ef3fe5d5-83eb-4509-993b-6fe5995841e6"
        }
      },
      {
        "type": "rerun",
        "label": "app-analytics-report-01-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "c416dd9b-17c1-4079-8fc7-6db1bf91eda7"
        }
      },
      {
        "type": "rerun",
        "label": "app-analytics-scheduler-02-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "5ef1f62c-a503-4c93-87f6-e69fc8f07c43"
        }
      },
      {
        "type": "rerun",
        "label": "app-apm-audit-03-3 선택 (primary)",
        "payload": {
          "selected_ci_id": "bbfd367f-5b15-4209-a47f-5a00ff7b778e"
        }
      },
      {
        "type": "rerun",
        "label": "app-apm-integration-02-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "64ba406d-9c27-4b97-b668-af38f091336e"
        }
      },
      {
        "type": "rerun",
        "label": "app-apm-inventory-03-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "e7576aff-6c86-4fae-b8b3-b6f07f7f3d4c"
        }
      },
      {
        "type": "rerun",
        "label": "app-apm-pricing-01-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "53d68ddc-2565-46d2-8f7d-835cdbc4382f"
        }
      },
      {
        "type": "open_trace",
        "label": "Trace details"
      }
    ],
    "meta": {
      "route": "ci",
      "route_reason": "CI tab",
      "timing_ms": 0,
      "summary": "Multiple CI candidates",
      "used_tools": [
        "ci.search",
        "ci.search",
        "ci.search_broad"
      ],
      "fallback": false,
      "runner_context": {
        "marker": "RUNNER_PATCH_GRAPH_20260112",
        "file": "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/orchestrator/runner.py",
        "pid": 422680,
        "thread_id": 140636934096576
      },
      "trace_id": null,
      "parent_trace_id": null
    }
  }
}