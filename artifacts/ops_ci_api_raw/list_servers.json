{
  "time": "2026-01-20T02:49:00.149818",
  "code": 0,
  "message": "OK",
  "data": {
    "answer": "Multiple CI candidates",
    "blocks": [
      {
        "type": "text",
        "text": "Multiple candidates found"
      },
      {
        "type": "table",
        "columns": [
          "ci_id",
          "ci_code",
          "ci_name",
          "ci_type",
          "ci_subtype",
          "ci_category",
          "status",
          "location",
          "owner"
        ],
        "rows": [
          [
            "e754253e-9963-4981-b465-2a5703c3ca63",
            "app-erp-alert-04-2",
            "ERP_App_Alert_04-2",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "erp-apps"
          ],
          [
            "f38b1478-420e-44d7-b402-b25d8fcccf11",
            "app-erp-alert-05-1",
            "ERP_App_Alert_05-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-b",
            "erp-apps"
          ],
          [
            "28f47106-bb5e-4795-81cd-6ca6fa426d1a",
            "app-erp-integration-03-2",
            "ERP_App_Integration_03-2",
            "SW",
            "app",
            "application",
            "active",
            "zone-a",
            "erp-apps"
          ],
          [
            "fb43575e-6078-4abe-a89e-4bb9e2a8f48f",
            "app-erp-integration-04-3",
            "ERP_App_Integration_04-3",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "erp-apps"
          ],
          [
            "379c7d44-2a8d-468f-b25d-d75999c37edf",
            "app-erp-order-03-1",
            "ERP_App_Order_03-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "erp-apps"
          ],
          [
            "7f4567a3-d926-4e49-9d8f-0ebb0871a269",
            "app-erp-pricing-01-1",
            "ERP_App_Pricing_01-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-b",
            "erp-apps"
          ],
          [
            "31ff24c3-3517-481f-9f17-423ac6b7a056",
            "app-erp-report-02-1",
            "ERP_App_Report_02-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-c",
            "erp-apps"
          ],
          [
            "2aa8f124-65c8-4e6e-8099-25b923a51f47",
            "app-erp-scheduler-04-1",
            "ERP_App_Scheduler_04-1",
            "SW",
            "app",
            "application",
            "active",
            "zone-a",
            "erp-apps"
          ],
          [
            "3e1f2da3-a9c5-4e71-9486-5cc929f02fe5",
            "db-erp-02",
            "ERP_DB_02",
            "SW",
            "db",
            "application",
            "active",
            "zone-c",
            "erp-db"
          ],
          [
            "b52eabb2-db9a-4434-b7fa-c01beeb0a9de",
            "db-erp-05",
            "ERP_DB_05",
            "SW",
            "db",
            "application",
            "active",
            "zone-a",
            "erp-db"
          ]
        ],
        "title": "CI candidates (primary endpoint)",
        "id": "ci-candidates-primary"
      }
    ],
    "trace": {
      "plan_raw": {
        "intent": "LIST",
        "view": "SUMMARY",
        "mode": "auto",
        "primary": {
          "keywords": [],
          "filters": [],
          "limit": 5
        },
        "secondary": {
          "keywords": [
            "owner",
            "erp-platform",
            "status",
            "monitoring",
            "서버"
          ],
          "filters": [],
          "limit": 5
        },
        "aggregate": {
          "group_by": [],
          "metrics": [],
          "filters": [
            {
              "field": "ci_subtype",
              "op": "=",
              "value": "server"
            }
          ],
          "scope": "ci",
          "top_n": 10
        },
        "graph": {
          "depth": 2,
          "limits": {
            "max_nodes": 200,
            "max_edges": 400,
            "max_paths": 25
          },
          "view": null
        },
        "output": {
          "blocks": [
            "table"
          ],
          "primary": "table"
        },
        "metric": null,
        "history": {
          "enabled": false,
          "source": "event_log",
          "scope": "ci",
          "mode": "recent",
          "time_range": "last_7d",
          "limit": 50
        },
        "cep": null,
        "auto": {
          "views": [
            "NEIGHBORS"
          ],
          "depth_hint": null,
          "include_metric": false,
          "metric_mode": "aggregate",
          "include_history": false,
          "include_cep": false,
          "path": {
            "source_ci_code": null,
            "target_ci_code": null
          },
          "graph_scope": {
            "include_metric": false,
            "include_history": false
          }
        },
        "list": {
          "enabled": true,
          "limit": 50,
          "offset": 0
        },
        "normalized_from": null,
        "normalized_to": null,
        "steps": [],
        "branches": [],
        "loops": [],
        "budget": {
          "max_steps": 10,
          "max_depth": 5,
          "max_branches": 3,
          "max_iterations": 100,
          "timeout_seconds": null
        },
        "enable_multistep": false
      },
      "plan_validated": {
        "intent": "LIST",
        "view": "SUMMARY",
        "mode": "auto",
        "primary": {
          "keywords": [
            "erp-platform"
          ],
          "filters": [],
          "limit": 5
        },
        "secondary": {
          "keywords": [
            "owner",
            "erp-platform",
            "status",
            "monitoring",
            "서버"
          ],
          "filters": [],
          "limit": 5
        },
        "aggregate": {
          "group_by": [],
          "metrics": [],
          "filters": [
            {
              "field": "ci_subtype",
              "op": "=",
              "value": "server"
            }
          ],
          "scope": "ci",
          "top_n": 10
        },
        "graph": {
          "depth": 1,
          "limits": {
            "max_nodes": 200,
            "max_edges": 400,
            "max_paths": 25
          },
          "view": "NEIGHBORS"
        },
        "output": {
          "blocks": [
            "table"
          ],
          "primary": "table"
        },
        "metric": null,
        "history": {
          "enabled": false,
          "source": "event_log",
          "scope": "ci",
          "mode": "recent",
          "time_range": "last_7d",
          "limit": 50
        },
        "cep": null,
        "auto": {
          "views": [
            "NEIGHBORS"
          ],
          "depth_hint": null,
          "include_metric": false,
          "metric_mode": "aggregate",
          "include_history": false,
          "include_cep": false,
          "path": {
            "source_ci_code": null,
            "target_ci_code": null
          },
          "graph_scope": {
            "include_metric": false,
            "include_history": false
          }
        },
        "list": {
          "enabled": false,
          "limit": 50,
          "offset": 0
        },
        "normalized_from": null,
        "normalized_to": null,
        "steps": [],
        "branches": [],
        "loops": [],
        "budget": {
          "max_steps": 10,
          "max_depth": 5,
          "max_branches": 3,
          "max_iterations": 100,
          "timeout_seconds": null
        },
        "enable_multistep": false
      },
      "policy_decisions": {
        "view": "NEIGHBORS",
        "requested_depth": 1,
        "clamped_depth": 1,
        "allowed_rel_types": [],
        "discovered_rel_types": []
      },
      "tool_calls": [
        {
          "tool": "ci.search",
          "elapsed_ms": 124,
          "input_params": {
            "keywords": [
              "erp-platform"
            ],
            "filter_count": 0,
            "limit": 5,
            "sort": null
          },
          "output_summary": {
            "keyword_count": 1,
            "filter_count": 0,
            "limit": 5,
            "sort_column": null,
            "row_count": 0
          },
          "error": null,
          "query_asset": null
        },
        {
          "tool": "ci.search",
          "elapsed_ms": 0,
          "input_params": {
            "keywords": [
              "erp-platform"
            ],
            "filter_count": 0,
            "limit": 5,
            "sort": null
          },
          "output_summary": {
            "keyword_count": 1,
            "filter_count": 0,
            "limit": 5,
            "sort_column": null,
            "row_count": 0
          },
          "error": null,
          "query_asset": null
        },
        {
          "tool": "ci.search_broad",
          "elapsed_ms": 145,
          "input_params": {},
          "output_summary": {
            "keyword_count": 5,
            "filter_count": 0,
            "limit": 10,
            "sort_column": null,
            "row_count": 10
          },
          "error": null,
          "query_asset": null
        }
      ],
      "references": [],
      "errors": [],
      "tenant_id": "t1",
      "trace_id": null,
      "parent_trace_id": null,
      "auto": {
        "auto_recipe_applied": true,
        "views": [],
        "metrics": {},
        "history": {},
        "graph_scope": {},
        "path": {},
        "cep": {},
        "status": "ci_unresolved"
      },
      "graph_expected_but_missing": true
    },
    "next_actions": [
      {
        "type": "rerun",
        "label": "app-erp-alert-04-2 선택 (primary)",
        "payload": {
          "selected_ci_id": "e754253e-9963-4981-b465-2a5703c3ca63"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-alert-05-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "f38b1478-420e-44d7-b402-b25d8fcccf11"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-integration-03-2 선택 (primary)",
        "payload": {
          "selected_ci_id": "28f47106-bb5e-4795-81cd-6ca6fa426d1a"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-integration-04-3 선택 (primary)",
        "payload": {
          "selected_ci_id": "fb43575e-6078-4abe-a89e-4bb9e2a8f48f"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-order-03-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "379c7d44-2a8d-468f-b25d-d75999c37edf"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-pricing-01-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "7f4567a3-d926-4e49-9d8f-0ebb0871a269"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-report-02-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "31ff24c3-3517-481f-9f17-423ac6b7a056"
        }
      },
      {
        "type": "rerun",
        "label": "app-erp-scheduler-04-1 선택 (primary)",
        "payload": {
          "selected_ci_id": "2aa8f124-65c8-4e6e-8099-25b923a51f47"
        }
      },
      {
        "type": "rerun",
        "label": "db-erp-02 선택 (primary)",
        "payload": {
          "selected_ci_id": "3e1f2da3-a9c5-4e71-9486-5cc929f02fe5"
        }
      },
      {
        "type": "rerun",
        "label": "db-erp-05 선택 (primary)",
        "payload": {
          "selected_ci_id": "b52eabb2-db9a-4434-b7fa-c01beeb0a9de"
        }
      },
      {
        "type": "open_trace",
        "label": "Trace details"
      }
    ],
    "meta": {
      "route": "ci",
      "route_reason": "CI tab",
      "timing_ms": 0,
      "summary": "Multiple CI candidates",
      "used_tools": [
        "ci.search",
        "ci.search",
        "ci.search_broad"
      ],
      "fallback": false,
      "runner_context": {
        "marker": "RUNNER_PATCH_GRAPH_20260112",
        "file": "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/orchestrator/runner.py",
        "pid": 422680,
        "thread_id": 140636934096576
      },
      "trace_id": null,
      "parent_trace_id": null
    }
  }
}