# MVP → 프로덕션: 기능별 필수 보완 사항 (TODO 리스트)

이 문서는 각 기능 모듈별로 실제 운영 환경에 적용하기 위해 추가/보완이 필요한 기능들을 정리한 **TODO 리스트**입니다.

> **참고**: 
> - 이 문서는 운영 관점의 필수 보완 사항(TODO)을 정리한 것이며, 전체 기능 요구사항과는 별도로 관리됩니다.
> - 상세 기능 구현 요구사항은 프로젝트 내부 문서를 참조하세요.
> - 작업 진행 시 이 문서의 항목을 체크하고 업데이트하세요.

## 1. API Manager

### 현재 상태
- ✅ SQL/Workflow/Script API 정의 및 실행
- ✅ 실행 로그 (`tb_api_exec_log`, `tb_api_exec_step_log`)
- ✅ 런타임 라우터 (`/runtime/{path}`)
- ✅ 기본 에러 처리

### 운영에 필요한 기능

#### 🔴 필수 (즉시 필요)

1. **버전 관리 및 변경 이력**
   - API 정의 버전 관리 (현재는 `updated_at`만 존재)
   - 변경 이력 테이블 (누가, 언제, 무엇을 변경했는지)
   - 변경 사유/메모 필드
   - 변경 diff 표시

2. **롤백 기능**
   - 이전 버전으로 되돌리기
   - 변경 취소 (undo)
   - 안전한 배포 전략 (staging → production)

3. **API 검증 및 테스트**
   - API 정의 저장 전 검증 (SQL 문법, 스키마 등)
   - 자동 테스트 케이스 정의 및 실행
   - 테스트 스위트 관리
   - 배포 전 자동 검증

4. **권한 관리**
   - API별 실행 권한 (누가 실행 가능한가)
   - API 수정 권한
   - API 타입별 권한 (system vs custom)
   - 테넌트별 권한 격리 강화

#### 🟠 중요 (단기 필요)

5. **성능 모니터링 및 최적화**
   - API별 성능 메트릭 (평균 실행 시간, 실패율 등)
   - 슬로우 쿼리 감지 및 알림
   - 실행 통계 대시보드
   - 리소스 사용량 추적

6. **에러 처리 강화**
   - 사용자 친화적 에러 메시지
   - 에러 분류 및 통계
   - 재시도 정책
   - 실패한 실행 알림

7. **문서화 및 메타데이터**
   - API 문서 자동 생성 (OpenAPI/Swagger)
   - 파라미터 설명 및 예시
   - 사용 예시 및 가이드
   - 태그/카테고리 체계화

8. **의존성 관리**
   - API 간 의존성 추적 (workflow에서 참조하는 API들)
   - 의존성 변경 시 영향도 분석
   - API 삭제/비활성화 전 의존성 체크

#### 🟡 개선 (중기 필요)

9. **캐싱 및 최적화**
   - API 응답 캐싱 (TTL 기반)
   - 캐시 무효화 정책
   - 쿼리 결과 캐싱

10. **배치 실행 및 스케줄링**
    - API 배치 실행
    - 스케줄 기반 자동 실행
    - 실행 우선순위 관리

11. **A/B 테스트 및 점진적 배포**
    - API 버전 간 A/B 테스트
    - 트래픽 분할 (canary deployment)
    - 점진적 롤아웃

12. **API 마이그레이션 도구**
    - API 마이그레이션 가이드
    - 자동 마이그레이션 스크립트
    - 하위 호환성 체크

---

## 2. CEP Builder

### 현재 상태
- ✅ Rule 정의 및 실행 (metric/event/schedule)
- ✅ 메트릭 폴링 및 알림
- ✅ 스케줄러 및 리더 선출
- ✅ 실행 로그 및 이벤트 브라우저
- ✅ Webhook 알림

### 운영에 필요한 기능

#### 🔴 필수 (즉시 필요)

1. **Rule 버전 관리**
   - Rule 변경 이력
   - Rule 버전 비교
   - 이전 버전으로 롤백
   - Rule 변경 감사 로그

2. **Rule 테스트 및 검증**
   - Rule 저장 전 유효성 검사
   - 시뮬레이션 결과 검증
   - 테스트 데이터 세트
   - Rule 테스트 스위트

3. **다양한 알림 채널**
   - 현재: webhook만 지원
   - 필요: 이메일, SMS, Slack, Teams 등
   - 채널별 템플릿 관리
   - 채널별 재시도 정책

4. **Rule 디버깅 도구**
   - Rule 실행 추적 (실시간)
   - 조건 평가 과정 상세 로그
   - 디버그 모드 (상세 로깅)
   - Rule 실행 플로우 시각화

#### 🟠 중요 (단기 필요)

5. **Rule 성능 모니터링**
   - Rule별 실행 통계
   - 트리거 빈도 분석
   - 실패 원인 분석
   - 리소스 사용량 추적

6. **Rule 중복 및 충돌 관리**
   - 유사 Rule 감지
   - Rule 충돌 검사
   - Rule 그룹화 및 관리
   - Rule 의존성 추적

7. **알림 정책 고도화**
   - 알림 우선순위
   - 알림 그룹핑 및 요약
   - 알림 스로틀링 정책 개선
   - 알림 템플릿 커스터마이징

8. **Rule 자동화 및 스케줄링 고도화**
   - Cron 표현식 지원 (현재는 interval_seconds만)
   - 시간대 지원
   - Rule 실행 일정 관리
   - Rule 실행 일시 중지/재개

#### 🟡 개선 (중기 필요)

9. **Rule 템플릿 및 라이브러리**
   - Rule 템플릿 제공
   - Rule 라이브러리 (공유 가능한 Rule)
   - Rule 마켓플레이스 개념
   - Rule 가져오기/내보내기

10. **Rule 복잡도 관리**
    - Rule 복잡도 분석
    - Rule 최적화 제안
    - Rule 성능 프로파일링
    - Rule 리팩토링 도구

11. **다중 테넌트 지원 강화**
    - 테넌트별 Rule 격리
    - 테넌트별 알림 채널 설정
    - 테넌트별 리소스 할당량

12. **Rule 백업 및 복구**
    - Rule 백업 자동화
    - Rule 복구 프로세스
    - Rule 내보내기/가져오기 (JSON/YAML)

---

## 3. UI Creator

### 현재 상태
- ✅ Grid/Chart/Dashboard 정의
- ✅ 위젯 레이아웃 및 리프레시
- ✅ 런타임 데이터 바인딩

### 운영에 필요한 기능

#### 🔴 필수 (즉시 필요)

1. **UI 정의 버전 관리**
   - UI 정의 변경 이력
   - 버전 비교 및 diff
   - 이전 버전으로 롤백
   - 변경 감사 로그

2. **UI 검증 및 테스트**
   - 스키마 유효성 검사
   - 엔드포인트 연결 테스트
   - 렌더링 미리보기 (에러 검출)
   - UI 테스트 스위트

3. **권한 관리**
   - UI별 접근 권한
   - UI 수정 권한
   - UI 공유 및 공개 설정
   - 테넌트별 UI 격리

4. **에러 처리 및 폴백**
   - 데이터 소스 실패 시 처리
   - 타임아웃 처리
   - 부분 실패 시 UI 표시
   - 사용자 친화적 에러 메시지

#### 🟠 중요 (단기 필요)

5. **UI 성능 최적화**
   - 데이터 로딩 성능 모니터링
   - 캐싱 전략
   - 지연 로딩 (lazy loading)
   - 데이터 페이징/가상화

6. **UI 공유 및 협업**
   - UI 공유 링크
   - UI 복제/포크
   - UI 코멘트 및 피드백
   - UI 버전 협업

7. **UI 템플릿 및 라이브러리**
   - UI 템플릿 제공
   - 재사용 가능한 위젯 라이브러리
   - UI 가져오기/내보내기
   - UI 마켓플레이스

8. **반응형 디자인 지원**
   - 모바일 레이아웃
   - 반응형 그리드
   - 화면 크기별 최적화
   - 접근성 (a11y) 개선

#### 🟡 개선 (중기 필요)

9. **고급 차트 기능**
   - 현재: line chart만
   - 필요: bar, pie, scatter, heatmap 등
   - 인터랙티브 차트
   - 차트 애니메이션

10. **실시간 데이터 업데이트**
    - WebSocket/SSE 지원
    - 자동 새로고침 간격 설정
    - 실시간 스트리밍 데이터
    - 실시간 알림 표시

11. **대시보드 고도화**
    - 대시보드 템플릿
    - 위젯 드래그 앤 드롭
    - 대시보드 레이아웃 저장
    - 대시보드 프리셋

12. **UI 분석 및 인사이트**
    - UI 사용 통계
    - 사용자 행동 분석
    - UI 성능 메트릭
    - 인기 UI 추천

---

## 4. OPS/CI (Configuration Item Management)

### 현재 상태
- ✅ CI 검색 및 조회
- ✅ 그래프 관계 탐색
- ✅ 메트릭 집계 및 시계열
- ✅ 이벤트 로그 히스토리
- ✅ AI 기반 질의 시스템
- ✅ AUTO 모드 및 인사이트
- ✅ 기본 오케스트레이션 (CI Orchestrator)

### 운영에 필요한 기능

#### 🔴 필수 (즉시 필요)

1. **CI 변경 관리**
   - CI 변경 이력 추적
   - CI 변경 승인 워크플로우
   - CI 변경 롤백
   - CI 변경 감사 로그

2. **CI 데이터 정합성 검증**
   - CI 데이터 검증 규칙
   - 중복 CI 감지
   - 데이터 무결성 체크
   - 정기 데이터 검증 작업

3. **CI 관계 관리 고도화**
   - 관계 자동 감지 및 추천
   - 관계 검증 및 정합성 체크
   - 순환 참조 감지
   - 관계 변경 이력

4. **질의 성능 최적화**
   - 복잡한 질의 최적화
   - 질의 결과 캐싱
   - 질의 타임아웃 관리
   - 질의 실행 계획 분석

#### 🟠 중요 (단기 필요)

5. **CI 검색 및 필터링 고도화**
   - 고급 검색 옵션
   - 저장된 검색/필터
   - CI 비교 기능
   - CI 일괄 작업

6. **CI 자동화 및 통합**
   - CI 자동 등록 (Discovery)
   - 외부 시스템과의 CI 동기화
   - CI 변경 자동 반영
   - CI 라이프사이클 관리

7. **CI 리포트 및 분석**
   - CI 현황 리포트
   - CI 통계 및 분석
   - CI 트렌드 분석
   - CI 영향도 분석 리포트

8. **메트릭 및 이벤트 고도화**
   - 메트릭 임계값 관리
   - 메트릭 기반 알림
   - 이벤트 상관 분석
   - 메트릭 예측 및 추세 분석

#### 🟡 개선 (중기 필요)

9. **CI 템플릿 및 표준화**
   - CI 타입별 템플릿
   - CI 스키마 표준화
   - CI 명명 규칙 강제
   - CI 메타데이터 표준

10. **CI 시각화 고도화**
    - 대화형 네트워크 그래프
    - CI 타임라인 뷰
    - CI 지도 (geographic)
    - 3D 네트워크 시각화

11. **CI 백업 및 복구**
    - CI 데이터 백업
    - CI 데이터 복구
    - CI 데이터 마이그레이션
    - CI 스냅샷 관리

12. **AI 질의 시스템 고도화**
    - 질의 히스토리 학습
    - 질의 추천
    - 질의 자동 완성
    - 질의 성능 개선

13. **코디네이터(오케스트레이션) 고도화** 🔴 필수
    - 현재: 기본적인 질의-응답 오케스트레이션
    - 필요: 재귀적 질의 처리 (답이 나올 때까지 반복)
    - 필요: 분기 처리 (조건부 실행)
    - 필요: LangGraph/LangChain/LlamaIndex 통합 검토 및 적용
    - 필요: 병렬/순차 실행 최적화
    - 필요: 다양한 도구 통합 (메트릭, 연결, 문서, 대화이력, 유지보수/작업이력, 구성, 속성 등)
    - 필요: 포괄적인 테스트 케이스 (다양한 조합 시나리오)
    - 필요: 답변 구조화 (상단 답변 → 요약 → 상세)
    - 필요: 다양한 출력 형식 지원 (텍스트/마크다운, 그래프, 이미지 등)

14. **MCP (Model Context Protocol) 구성** 🟠 중요
    - 현재: Postgres, Neo4j MCP 구성 완료
    - 필요: 직접 조회 기능 고도화
    - 필요: MCP 사용 또는 프로그램 직접 처리 선택 가능
    - 필요: MCP를 통한 데이터 소스 통합 확장

15. **실시간 데이터 연계** 🟠 중요
    - TIM+ 연계를 통한 실시간 데이터 수집
    - 이벤트 및 메트릭 데이터 연계
    - 어댑터 기반 쉬운 연계 구조
    - 실시간 데이터를 통한 동적 차트 업데이트

16. **분석 기능** 🟡 개선
    - 최적 경로 분석 (그래프 DB 기반)
    - 동선 분석
    - 원인 분석 (특정 사건 발생 시 다양한 조건 분석)
    - 분석 템플릿화
    - 즉시 조건 생성 및 템플릿 저장

17. **이상징후 검출** 🟡 개선
    - 이상징후 이벤트 및 수치 데이터 기반 검출
    - CEP 엔진 기반 검출
    - ML 기반 이상 검출 알고리즘
    - 동적 임계치 자동 설정 및 비교
    - 이상 데이터 제거 옵션

---

## 5. Data Explorer

### 현재 상태
- ✅ Read-only Postgres/Neo4j/Redis 탐색
- ✅ Query/Command 실행 (안전한 명령만)
- ✅ Dev 전용 (플래그로 제어)

### 운영에 필요한 기능

#### 🔴 필수 (프로덕션 활성화 시)

1. **프로덕션 활성화 결정**
   - 현재: dev 전용
   - 결정 필요: 프로덕션에서 활성화할지
   - 활성화 시: 권한 관리 필수

2. **권한 관리 (활성화 시)**
   - 데이터베이스별 접근 권한
   - 테이블/컬렉션별 접근 권한
   - 쿼리 실행 권한
   - 읽기 전용 권한 강제

3. **감사 로그**
   - 모든 쿼리 실행 로그
   - 사용자별 실행 이력
   - 접근한 데이터 추적
   - 쿼리 실행 통계

#### 🟠 중요 (활성화 시)

4. **쿼리 성능 관리**
   - 쿼리 타임아웃 강화
   - 슬로우 쿼리 감지
   - 쿼리 실행 시간 제한
   - 리소스 사용량 제한

5. **쿼리 저장 및 공유**
   - 자주 사용하는 쿼리 저장
   - 쿼리 공유 기능
   - 쿼리 템플릿
   - 쿼리 버전 관리

6. **결과 내보내기 및 리포트**
   - 결과 CSV/Excel 내보내기
   - 결과 PDF 리포트 생성
   - 스케줄 기반 리포트
   - 리포트 공유

---

## 7. 문서 검색 (Document Search)

### 현재 상태
- ✅ 문서 업로드 및 파싱
- ✅ 벡터화 및 저장
- ✅ 기본 검색 기능

### 운영에 필요한 기능

#### 🔴 필수 (즉시 필요)

1. **문서 처리 고도화**
   - 현재: PDF 지원
   - 필요: PPT, DOC, XLS 등 다중 형식 지원
   - 필요: 백그라운드 처리 (큰 파일의 경우 비동기)
   - 필요: 처리 상태 UI (업로드 → 파싱 중 → 완료)
   - 필요: 청킹 단위 최적화 (문장 단위 검토)
   - 필요: 페이지/문단/문장/챕터 단위 참조 지원

2. **문서 관리 시스템**
   - 문서 업로드 이력 관리 (DB 저장)
   - 문서 삭제 시 DB 동기 삭제
   - 문서 메타데이터 관리
   - 문서 버전 관리

3. **검색 결과 표시 고도화**
   - 테이블, 그래프, 텍스트, PDF 표시
   - 시스템 연결 처리 (유연한 링크 관리)
   - 검색 결과 출처 표시 (문장/문단/페이지/챕터)

4. **테넌트/사용자 분리**
   - 테넌트/회사/사용자별 문서 분리
   - 사용자별 문서 접근 권한
   - 문서 공유 정책

---

## 8. 대화 창 및 이력 (Chat & History)

### 현재 상태
- ✅ 기본 채팅 기능
- ✅ 히스토리 저장

### 운영에 필요한 기능

#### 🔴 필수 (즉시 필요)

1. **이력 관리 고도화**
   - 자동 요약 제목 생성
   - 시간 표시 (각 질의 바로 아래)
   - 토큰 수 표시 (요청/응답 토큰, 각 질의 바로 아래)
   - 답변 결과 저장 (차트, 테이블 포함)
   - 질의별 시간 이력 저장

2. **이력 검색 및 관리**
   - 이력 검색 기능 (클릭 시 이동)
   - 이력 삭제 (flag 기반 소프트 삭제)
   - 이력 분류 기능
   - 모든 화면에 채팅 검색 통합
   - 조건 자동 생성 (투명한 조건 생성 과정 표시)

3. **관리자 화면**
   - 사용자별 토큰 사용 현황
   - 전체 토큰 처리 현황
   - 요청/응답 토큰 계산 및 표시
   - 개발자 모드: UI→서버→LLM→서버→UI 각 구간별 요청 횟수 및 토큰 수

---

## 9. Event 처리 (Bytewax CEP)

### 현재 상태
- ✅ 기본 CEP Rule 처리
- ✅ Webhook 알림

### 운영에 필요한 기능

#### 🟠 중요 (단기 필요)

1. **Bytewax CEP 통합** (Windows 설치 완료, Python 3.12)
   - 이벤트 생성 실시간 감지
   - 이전 데이터 조회 UI 기능
   - 이벤트 대시보드 UI
   - 처리 액션 관리

2. **이벤트 분류 및 표시**
   - 소스 이벤트와 정책 이벤트 분리 표시
   - 이벤트 필터링 및 검색

3. **CEP 설정 UI**
   - 시간, 조건, 횟수 등 자유로운 설정
   - UI에서 편리한 설정 인터페이스
   - 외부 API 연동 지원

4. **CEP 엔진 모듈화**
   - 엔진 단독 설치 가능
   - UI 단독 설치 가능
   - 연계 API 제공
   - 독립적인 기능 사용 지원

---

## 10. 공통 기능 (모든 모듈에 적용)

### 🔴 필수 (즉시 필요)

1. **인증 및 권한 관리**
   - 사용자 인증 (JWT/OAuth2)
   - 역할 기반 접근 제어 (RBAC)
   - 리소스별 권한 관리
   - 테넌트 격리 강화

2. **감사 로그 (Audit Log)**
   - 모든 변경 사항 로깅
   - 사용자 활동 추적
   - 데이터 접근 로그
   - 감사 로그 보관 정책

3. **백업 및 복구**
   - 정기 자동 백업
   - 백업 검증
   - 복구 프로세스
   - 백업 보관 정책

4. **모니터링 및 알림**
   - 시스템 건강 상태 모니터링
   - 에러 알림
   - 성능 메트릭 수집
   - 대시보드 및 리포트

### 🟠 중요 (단기 필요)

5. **문서화**
   - API 문서 (OpenAPI/Swagger)
   - 사용자 가이드
   - 운영 매뉴얼
   - 트러블슈팅 가이드

6. **테스트 및 품질 보증**
   - 단위 테스트 커버리지 향상
   - 통합 테스트
   - E2E 테스트
   - 성능 테스트

7. **성능 최적화**
   - 데이터베이스 쿼리 최적화
   - 캐싱 전략
   - 리소스 사용량 최적화
   - 확장성 개선

8. **로그 처리 표준화** 🔴 필수
   - 표준 로그 포맷
   - 콘솔 및 파일 동시 출력
   - Debug 모드 설정
   - 로그 레벨 관리
   - 로그 로테이션

9. **테스트 관리** 🔴 필수
   - Unit 테스트 기능 포함
   - 기능 개발 시 테스트 케이스 동시 작성
   - REST 호출 테스트
   - UI 표시 테스트
   - 테스트 커버리지 관리

10. **보안 처리 상세** 🔴 필수
    - 로그인/로그아웃 (ID/Password 암호화)
    - 세션 연장
    - SSO 준비
    - 로그인 이력 관리
    - 요청/응답 암호화
    - REST API 보안 (API Key)
    - 기능별 권한 (메뉴 권한 포함)
    - 데이터별 권한
    - URL 공유 기능 (인증 없이 접근, 권한 위임, 공유 기록)
    - HTTPS 지원 및 HTTP 암호화

11. **목업(Mock) 처리** 🟡 개선
    - 데이터 연계 없는 경우 로컬 JSON 파일 사용
    - DB Connector / JSON File Connector 분리
    - Mock 데이터 세트 제공
    - LLM/DB 미연결 시 Mock 처리

12. **관리 화면** 🟠 중요
    - Neo4j 조회 화면
    - Postgres 조회 화면
    - 시스템 로그 조회 및 다운로드
    - 프로세스/시스템 모니터링
    - 프롬프트 관리 (최적 프롬프트 관리, 보안 제안 문구 삽입)
    - 프롬프트 확인/수정 UI (관리자 모드)
    - DB 쿼리 관리 (외부화, DB 저장)
    - 사용자 화면: 요청/응답 토큰 표시
    - 개발자 모드: 각 구간별 요청 횟수 및 토큰 수

13. **배포 및 설치** 🟠 중요
    - SSH 원격 설치 (tobitspaai_YYYYMMDD.sh)
    - 설치 후 웹 화면 자동 실행
    - Shell 기반 Python 실행
    - 단일 프로세스 + 멀티 스레드
    - 이중화 고려 (Docker 검토)
    - Cython 빌드 및 소스 파일 삭제 (설치 시)
    - venv 방식, wheel 파일 설치
    - Python 3.12 (Linux 우선)
    - DB 선택 방식 (다수 DB 지원 검토)

14. **아키텍처 개선** 🟡 개선
    - Bytewax 통합 (이미 Windows 설치 완료)
    - LangChain, LlamaIndex 검토 및 적용
    - SQLModel 사용 (SQLAlchemy 대체 검토 완료, 현재 사용 중)
    - React 개발 (UI/서버 분리)
    - Python 분석 차트 활용 방법 검토
    - 이중화 구성 (Neo4j Community는 이중화 제한)
    - 대용량 처리 고려
    - Port 분리 (웹용, API용)

---

## 우선순위 요약

### 즉시 시작 (P0)
1. **인증/권한 관리** (공통) - 보안 기반
2. **버전 관리 및 변경 이력** (API Manager, CEP Builder, UI Creator)
3. **롤백 기능** (API Manager, CEP Builder, UI Creator)
4. **검증 및 테스트 도구** (모든 모듈)
5. **코디네이터 고도화** (OPS/CI) - 핵심 기능
6. **로그 처리 표준화** (공통)
7. **보안 처리 상세** (공통)

### 단기 (1-3개월, P1)
8. **감사 로그** (공통)
9. **성능 모니터링** (모든 모듈)
10. **알림 채널 확장** (CEP Builder)
11. **문서화** (공통)
12. **대화 창 및 이력 고도화** (Chat & History)
13. **문서 검색 확장** (다중 형식, 관리 시스템)
14. **MCP 구성 고도화** (OPS/CI)
15. **실시간 데이터 연계** (TIM+ 연계)
16. **관리 화면** (프롬프트 관리, 모니터링 등)
17. **Bytewax CEP 통합** (Event 처리)

### 중기 (3-6개월, P2)
18. **백업 및 복구** (공통)
19. **고급 기능** (각 모듈별)
20. **템플릿 및 라이브러리** (각 모듈별)
21. **협업 기능** (각 모듈별)
22. **분석 기능** (최적 경로, 원인 분석)
23. **이상징후 검출** (ML 기반)
24. **배포 및 설치 자동화**
25. **목업 처리 시스템**

---

## 추가 고려 사항 (요구사항 문서 기준)

### 데이터 및 인프라
- 실제와 유사한 규모의 데이터 필요
- TIM+ 설치 및 사용 (실시간 데이터)
- 구성 데이터: 자산/구성/기기 목록 및 상세정보
- 유지보수/작업이력 데이터 시스템 연계

### 저장소 아키텍처
- 그래프 DB: 사전 구조 정의 최소화
- Postgres: 모든 데이터에 대한 구조 정의 필요

### 시스템 방향
- 모든 작업을 UI 또는 Chat으로 진행
- 관리자 중심 설계 (정보 제공 및 편의성)
- AI 기반 바이브 코딩 지원 (프롬프트/설계안 기반 개발)

### 매뉴얼 및 가이드
- 설치 및 초기 세팅 가이드
- 개발 가이드
- 사용자 가이드
- 운용자 가이드
