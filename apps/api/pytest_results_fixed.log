============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /home/spa/tobit-spa-ai/apps/api/.venv/bin/python3.12
cachedir: .pytest_cache
rootdir: /home/spa/tobit-spa-ai/apps/api
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.12.1, langsmith-0.6.3, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 392 items

tests/test_api_keys.py::TestApiKeyGeneration::test_generate_api_key PASSED [  0%]
tests/test_api_keys.py::TestApiKeyGeneration::test_generate_unique_keys PASSED [  0%]
tests/test_api_keys.py::TestApiKeyCrud::test_create_api_key ERROR        [  0%]
tests/test_api_keys.py::TestApiKeyCrud::test_create_api_key_with_expiration ERROR [  1%]
tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_valid ERROR [  1%]
tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_invalid ERROR [  1%]
tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_expired ERROR [  1%]
tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_inactive ERROR [  2%]
tests/test_api_keys.py::TestApiKeyCrud::test_get_api_key ERROR           [  2%]
tests/test_api_keys.py::TestApiKeyCrud::test_get_api_key_wrong_user ERROR [  2%]
tests/test_api_keys.py::TestApiKeyCrud::test_list_api_keys ERROR         [  2%]
tests/test_api_keys.py::TestApiKeyCrud::test_list_api_keys_exclude_inactive ERROR [  3%]
tests/test_api_keys.py::TestApiKeyCrud::test_list_api_keys_include_inactive ERROR [  3%]
tests/test_api_keys.py::TestApiKeyCrud::test_revoke_api_key ERROR        [  3%]
tests/test_api_keys.py::TestApiKeyCrud::test_revoke_nonexistent_key ERROR [  3%]
tests/test_api_keys.py::TestApiKeyScopes::test_get_api_key_scopes ERROR  [  4%]
tests/test_api_keys.py::TestApiKeyScopes::test_has_scope_true ERROR      [  4%]
tests/test_api_keys.py::TestApiKeyScopes::test_has_scope_false ERROR     [  4%]
tests/test_api_keys.py::TestApiKeysRouter::test_create_api_key_endpoint ERROR [  4%]
tests/test_api_keys.py::TestApiKeysRouter::test_list_api_keys_endpoint ERROR [  5%]
tests/test_api_keys.py::TestApiKeysRouter::test_revoke_api_key_endpoint ERROR [  5%]
tests/test_asset_models.py::TestSourceAsset::test_source_type_enum PASSED [  5%]
tests/test_asset_models.py::TestSourceAsset::test_source_connection_creation PASSED [  5%]
tests/test_asset_models.py::TestSourceAsset::test_source_connection_defaults PASSED [  6%]
tests/test_asset_models.py::TestSourceAsset::test_source_asset_creation PASSED [  6%]
tests/test_asset_models.py::TestSourceAsset::test_source_asset_spec_json_pattern PASSED [  6%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_column_creation PASSED [  6%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_table_creation PASSED [  7%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_catalog_creation PASSED [  7%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_catalog_computed_properties PASSED [  7%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_catalog_get_table PASSED [  7%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_asset_creation PASSED [  8%]
tests/test_asset_models.py::TestSchemaAsset::test_schema_asset_spec_json_pattern PASSED [  8%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_type_enum PASSED [  8%]
tests/test_asset_models.py::TestResolverAsset::test_alias_mapping_creation FAILED [  8%]
tests/test_asset_models.py::TestResolverAsset::test_pattern_rule_creation FAILED [  9%]
tests/test_asset_models.py::TestResolverAsset::test_transformation_rule_creation FAILED [  9%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_rule_with_alias FAILED [  9%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_config_creation FAILED [  9%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_config_get_rule_by_name FAILED [ 10%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_config_get_rules_by_type FAILED [ 10%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_config_add_remove_rule FAILED [ 10%]
tests/test_asset_models.py::TestResolverAsset::test_resolver_asset_creation FAILED [ 10%]
tests/test_asset_models.py::TestResolverAsset::test_rule_priority_ordering FAILED [ 11%]
tests/test_asset_models.py::TestAssetIntegration::test_source_to_schema_reference FAILED [ 11%]
tests/test_asset_models.py::TestAssetIntegration::test_resolver_with_multiple_rule_types FAILED [ 11%]
tests/test_audit_log.py::test_list_audit_logs_returns_matching_entries PASSED [ 11%]
tests/test_audit_log.py::test_get_audit_logs_by_trace_and_parent PASSED  [ 12%]
tests/test_chat_stream.py::test_chat_stream_returns_answer_chunk PASSED  [ 12%]
tests/test_ci_exact_candidate.py::test_find_exact_candidate_matches_ci_name_case_insensitive PASSED [ 12%]
tests/test_ci_exact_candidate.py::test_find_exact_candidate_matches_ci_code PASSED [ 13%]
tests/test_ci_exact_candidate.py::test_find_exact_candidate_returns_none_when_no_exact_match PASSED [ 13%]
tests/test_ci_list_llm_output.py::test_llm_list_payload_forces_list_intent PASSED [ 13%]
tests/test_ci_list_llm_output.py::test_llm_list_default_limit_applies PASSED [ 13%]
tests/test_ci_management.py::TestCIChangeCreation::test_create_change_basic ERROR [ 14%]
tests/test_ci_management.py::TestCIChangeCreation::test_create_change_minimal ERROR [ 14%]
tests/test_ci_management.py::TestCIChangeCreation::test_create_change_all_types ERROR [ 14%]
tests/test_ci_management.py::TestCIChangeCreation::test_get_change_by_id ERROR [ 14%]
tests/test_ci_management.py::TestCIChangeCreation::test_get_change_not_found ERROR [ 15%]
tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_all ERROR [ 15%]
tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_filter_by_ci_id ERROR [ 15%]
tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_filter_by_status ERROR [ 15%]
tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_pagination ERROR [ 16%]
tests/test_ci_management.py::TestCIChangeApproval::test_approve_change ERROR [ 16%]
tests/test_ci_management.py::TestCIChangeApproval::test_reject_change ERROR [ 16%]
tests/test_ci_management.py::TestCIChangeApproval::test_approve_non_existent_change ERROR [ 16%]
tests/test_ci_management.py::TestCIChangeApproval::test_apply_change ERROR [ 17%]
tests/test_ci_management.py::TestCIChangeApproval::test_apply_unapproved_change_fails ERROR [ 17%]
tests/test_ci_management.py::TestCIChangeHistory::test_get_change_history_single_ci ERROR [ 17%]
tests/test_ci_management.py::TestCIChangeHistory::test_change_history_counts ERROR [ 17%]
tests/test_ci_management.py::TestCIChangeHistory::test_change_history_pending_approvals ERROR [ 18%]
tests/test_ci_management.py::TestCIIntegrityValidation::test_create_integrity_issue ERROR [ 18%]
tests/test_ci_management.py::TestCIIntegrityValidation::test_get_integrity_issues ERROR [ 18%]
tests/test_ci_management.py::TestCIIntegrityValidation::test_filter_integrity_issues_unresolved ERROR [ 18%]
tests/test_ci_management.py::TestCIIntegrityValidation::test_resolve_integrity_issue ERROR [ 19%]
tests/test_ci_management.py::TestCIIntegrityValidation::test_validate_ci_integrity ERROR [ 19%]
tests/test_ci_management.py::TestCIIntegrityValidation::test_get_integrity_summary ERROR [ 19%]
tests/test_ci_management.py::TestCIDuplicateDetection::test_create_duplicate_entry ERROR [ 19%]
tests/test_ci_management.py::TestCIDuplicateDetection::test_get_duplicates_for_ci ERROR [ 20%]
tests/test_ci_management.py::TestCIDuplicateDetection::test_confirm_duplicate ERROR [ 20%]
tests/test_ci_management.py::TestCIDuplicateDetection::test_duplicate_statistics ERROR [ 20%]
tests/test_ci_management.py::TestCIChangeStatistics::test_get_change_statistics ERROR [ 20%]
tests/test_ci_management.py::TestCIChangeStatistics::test_change_statistics_time_range ERROR [ 21%]
tests/test_ci_management.py::TestCIIntegrationWorkflow::test_complete_change_workflow ERROR [ 21%]
tests/test_ci_management.py::TestCIIntegrationWorkflow::test_duplicate_detection_to_merge_workflow ERROR [ 21%]
tests/test_ci_management.py::TestCIIntegrationWorkflow::test_integrity_validation_workflow ERROR [ 21%]
tests/test_ci_management.py::TestTenantIsolation::test_changes_isolated_by_tenant ERROR [ 22%]
tests/test_ci_management.py::TestTenantIsolation::test_issues_isolated_by_tenant ERROR [ 22%]
tests/test_ci_management.py::TestTenantIsolation::test_duplicates_isolated_by_tenant ERROR [ 22%]
tests/test_ci_runner_tool_contracts.py::TestToolCallContract::test_tool_call_creation PASSED [ 22%]
tests/test_ci_runner_tool_contracts.py::TestToolCallContract::test_tool_call_with_error PASSED [ 23%]
tests/test_ci_runner_tool_contracts.py::TestToolCallContract::test_tool_call_serialization PASSED [ 23%]
tests/test_ci_runner_tool_contracts.py::TestToolCallContract::test_tool_call_default_values PASSED [ 23%]
tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_multiple_tool_calls_accumulation PASSED [ 23%]
tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_tool_calls_with_errors PASSED [ 24%]
tests/test_ci_runner_tool_contracts.py::TestReferenceExtraction::test_extract_references_from_dict_blocks PASSED [ 24%]
tests/test_ci_runner_tool_contracts.py::TestReferenceExtraction::test_no_references_in_blocks PASSED [ 24%]
tests/test_ci_runner_tool_contracts.py::TestReferenceExtraction::test_multiple_reference_blocks PASSED [ 25%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_creation PASSED [ 25%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_defaults PASSED [ 25%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_validation_success PASSED [ 25%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_validation_negative_max_replans PASSED [ 26%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_validation_negative_interval PASSED [ 26%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_validation_negative_cooling_period PASSED [ 26%]
tests/test_control_loop.py::TestControlLoopPolicy::test_policy_validation_interval_greater_than_cooling PASSED [ 26%]
tests/test_control_loop.py::TestControlLoopRuntime::test_runtime_creation PASSED [ 27%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_allowed_trigger PASSED [ 27%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_disallowed_trigger PASSED [ 27%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_max_replans_exceeded PASSED [ 27%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_min_interval_not_met PASSED [ 28%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_cooling_period_active PASSED [ 28%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_critical_severity_override PASSED [ 28%]
tests/test_control_loop.py::TestControlLoopRuntime::test_record_replan PASSED [ 28%]
tests/test_control_loop.py::TestControlLoopRuntime::test_trigger_counts_tracking PASSED [ 29%]
tests/test_control_loop.py::TestControlLoopRuntime::test_get_stats PASSED [ 29%]
tests/test_control_loop.py::TestControlLoopRuntime::test_should_replan_with_string_trigger PASSED [ 29%]
tests/test_control_loop.py::TestControlLoopRuntime::test_multiple_replans_sequence PASSED [ 29%]
tests/test_control_loop.py::TestReplanEventSchema::test_replan_event_creation PASSED [ 30%]
tests/test_control_loop.py::TestReplanEventSchema::test_replan_patch_diff PASSED [ 30%]
tests/test_control_loop.py::TestReplanEventSchema::test_replan_trigger_structure PASSED [ 30%]
tests/test_documents.py::test_upload_creates_metadata_and_list ERROR     [ 30%]
tests/test_documents.py::test_document_stream_done_contains_references ERROR [ 31%]
tests/test_encryption.py::TestEncryptionManager::test_generate_key PASSED [ 31%]
tests/test_encryption.py::TestEncryptionManager::test_encrypt_plaintext PASSED [ 31%]
tests/test_encryption.py::TestEncryptionManager::test_decrypt_ciphertext PASSED [ 31%]
tests/test_encryption.py::TestEncryptionManager::test_encrypt_decrypt_roundtrip PASSED [ 32%]
tests/test_encryption.py::TestEncryptionManager::test_encrypt_none_raises_error PASSED [ 32%]
tests/test_encryption.py::TestEncryptionManager::test_decrypt_none_raises_error PASSED [ 32%]
tests/test_encryption.py::TestEncryptionManager::test_decrypt_invalid_ciphertext_raises_error PASSED [ 32%]
tests/test_encryption.py::TestEncryptionManager::test_different_keys_cannot_decrypt PASSED [ 33%]
tests/test_encryption.py::TestEncryptionManager::test_encryption_is_deterministic PASSED [ 33%]
tests/test_encryption.py::TestEncryptionManager::test_derive_key_from_password PASSED [ 33%]
tests/test_encryption.py::TestEncryptionManager::test_password_derived_key_works PASSED [ 33%]
tests/test_encryption.py::TestEncryptionManager::test_encryption_manager_initialization_without_key_raises_error PASSED [ 34%]
tests/test_encryption.py::TestEncryptionManager::test_encryption_manager_with_invalid_key_raises_error PASSED [ 34%]
tests/test_encryption.py::TestEncryptionManager::test_encrypt_empty_string PASSED [ 34%]
tests/test_encryption.py::TestEncryptionManager::test_encrypt_very_long_string PASSED [ 34%]
tests/test_encryption.py::TestUserEncryption::test_user_set_get_email PASSED [ 35%]
tests/test_encryption.py::TestUserEncryption::test_user_set_get_phone PASSED [ 35%]
tests/test_encryption.py::TestUserEncryption::test_user_set_empty_email PASSED [ 35%]
tests/test_encryption.py::TestUserEncryption::test_user_set_none_phone PASSED [ 35%]
tests/test_encryption.py::TestApiKeyEncryption::test_api_key_encrypt_hash PASSED [ 36%]
tests/test_encryption.py::TestApiKeyEncryption::test_api_key_decrypt_hash PASSED [ 36%]
tests/test_health.py::test_health_endpoint_structure PASSED              [ 36%]
tests/test_hello.py::test_hello_endpoint_structure PASSED                [ 36%]
tests/test_hello.py::test_hello_endpoint_invalid_method PASSED           [ 37%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_detect_metric_query PASSED [ 37%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_detect_graph_query PASSED [ 37%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_detect_history_query PASSED [ 38%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_detect_ci_query PASSED [ 38%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_detect_conditional_query PASSED [ 38%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_detect_composite_query PASSED [ 38%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_calculate_simple_complexity PASSED [ 39%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_calculate_complex_complexity PASSED [ 39%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_decompose_composite_query PASSED [ 39%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_determine_tools_metric PASSED [ 39%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_determine_tools_graph PASSED [ 40%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_extract_conditions_if_then PASSED [ 40%]
tests/test_langgraph_advanced.py::TestQueryAnalyzer::test_analyze_full_query PASSED [ 40%]
tests/test_langgraph_advanced.py::TestConditionalRouter::test_should_execute_default PASSED [ 40%]
tests/test_langgraph_advanced.py::TestConditionalRouter::test_should_execute_respects_depth_limit PASSED [ 41%]
tests/test_langgraph_advanced.py::TestConditionalRouter::test_choose_path_first_option PASSED [ 41%]
tests/test_langgraph_advanced.py::TestConditionalRouter::test_evaluate_condition_error PASSED [ 41%]
tests/test_langgraph_advanced.py::TestConditionalRouter::test_evaluate_condition_empty PASSED [ 41%]
tests/test_langgraph_advanced.py::TestConditionalRouter::test_evaluate_condition_complex PASSED [ 42%]
tests/test_langgraph_advanced.py::TestToolComposer::test_register_tool PASSED [ 42%]
tests/test_langgraph_advanced.py::TestToolComposer::test_compose_single_tool PASSED [ 42%]
tests/test_langgraph_advanced.py::TestToolComposer::test_compose_multiple_tools PASSED [ 42%]
tests/test_langgraph_advanced.py::TestToolComposer::test_compose_nonexistent_tool PASSED [ 43%]
tests/test_langgraph_advanced.py::TestToolComposer::test_compose_with_dependencies_simple PASSED [ 43%]
tests/test_langgraph_advanced.py::TestToolComposer::test_compose_with_dependencies_multiple PASSED [ 43%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_initialization PASSED [ 43%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_missing_api_key PASSED [ 44%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_run_simple_query PASSED [ 44%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_run_complex_query PASSED [ 44%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_run_with_depth_limit PASSED [ 44%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_run_sequential_mode PASSED [ 45%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_run_parallel_mode PASSED [ 45%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_run_hybrid_mode PASSED [ 45%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_execute_simple_returns_blocks PASSED [ 45%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_execute_decomposed_returns_blocks PASSED [ 46%]
tests/test_langgraph_advanced.py::TestLangGraphAdvancedRunner::test_build_summary_block PASSED [ 46%]
tests/test_langgraph_advanced.py::TestExecutionState::test_execution_state_creation PASSED [ 46%]
tests/test_langgraph_advanced.py::TestExecutionState::test_execution_state_tracking PASSED [ 46%]
tests/test_langgraph_advanced.py::TestIntegration::test_full_workflow_simple_to_complex PASSED [ 47%]
tests/test_langgraph_advanced.py::TestIntegration::test_query_analysis_to_execution PASSED [ 47%]
tests/test_migration_final.py::test_streaming_migration PASSED           [ 47%]
tests/test_migration_final.py::test_embedding_migration PASSED           [ 47%]
tests/test_migration_final.py::test_llm_client_output_parsing PASSED     [ 48%]
tests/test_openai.py::test_openai_stream_hello PASSED                    [ 48%]
tests/test_operation_settings.py::test_get_all_operation_settings PASSED [ 48%]
tests/test_operation_settings.py::test_get_ops_mode_setting PASSED       [ 48%]
tests/test_operation_settings.py::test_get_unknown_setting PASSED        [ 49%]
tests/test_operation_settings.py::test_update_ops_mode_setting PASSED    [ 49%]
tests/test_operation_settings.py::test_update_setting_with_invalid_value PASSED [ 49%]
tests/test_operation_settings.py::test_update_setting_with_wrong_type PASSED [ 50%]
tests/test_operation_settings.py::test_update_boolean_setting PASSED     [ 50%]
tests/test_operation_settings.py::test_setting_persistence_across_requests PASSED [ 50%]
tests/test_operation_settings.py::test_setting_missing_value_field PASSED [ 50%]
tests/test_ops_executor_tool_contracts.py::TestExecutorResultStructure::test_executor_result_creation PASSED [ 51%]
tests/test_ops_executor_tool_contracts.py::TestExecutorResultStructure::test_executor_result_with_defaults PASSED [ 51%]
tests/test_ops_executor_tool_contracts.py::TestExecutorResultStructure::test_executor_result_serialization PASSED [ 51%]
tests/test_ops_executor_tool_contracts.py::TestMetricExecutorToolContract::test_metric_executor_structure_can_be_verified PASSED [ 51%]
tests/test_ops_executor_tool_contracts.py::TestMetricExecutorToolContract::test_hist_executor_structure_can_be_verified PASSED [ 52%]
tests/test_ops_executor_tool_contracts.py::TestHistExecutorToolContract::test_hist_executor_can_be_imported PASSED [ 52%]
tests/test_ops_executor_tool_contracts.py::TestGraphExecutorToolContract::test_graph_executor_can_be_imported PASSED [ 52%]
tests/test_ops_executor_tool_contracts.py::TestExecutorBackwardCompatibility::test_normalize_real_result_with_executor_result PASSED [ 52%]
tests/test_ops_executor_tool_contracts.py::TestExecutorBackwardCompatibility::test_normalize_real_result_with_legacy_tuple PASSED [ 53%]
tests/test_ops_executor_tool_contracts.py::TestExecutorBackwardCompatibility::test_normalize_real_result_with_legacy_tuple_and_error PASSED [ 53%]
tests/test_ops_executor_tool_contracts.py::TestToolCallSerialization::test_executor_result_tool_calls_serialize_correctly PASSED [ 53%]
tests/test_ops_executor_tool_contracts.py::TestReferenceExtraction::test_reference_extraction_from_references_block PASSED [ 53%]
tests/test_ops_executor_tool_contracts.py::TestReferenceExtraction::test_empty_references_handling PASSED [ 54%]
tests/test_ops_resolvers.py::test_ci_resolver_exact_code PASSED          [ 54%]
tests/test_ops_resolvers.py::test_ci_resolver_name_fallback PASSED       [ 54%]
tests/test_ops_resolvers.py::test_metric_resolver_cpu PASSED             [ 54%]
tests/test_ops_resolvers.py::test_time_range_last_7_days PASSED          [ 55%]
tests/test_ops_resolvers.py::test_time_range_month_2025_12 PASSED        [ 55%]
tests/test_ops_service.py::test_handle_ops_query_mock_mode_uses_mock_blocks PASSED [ 55%]
tests/test_ops_service.py::test_handle_ops_query_real_mode_fallbacks_and_flags_error PASSED [ 55%]
tests/test_ops_service.py::test_ops_metric_real_blocks_shape PASSED      [ 56%]
tests/test_ops_service.py::test_ops_hist_real_blocks_shape PASSED        [ 56%]
tests/test_ops_service.py::test_ops_graph_real_blocks_shape PASSED       [ 56%]
tests/test_ops_service.py::test_ops_all_real_blocks_shape FAILED         [ 56%]
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back FAILED [ 57%]
tests/test_ops_service.py::test_ops_all_partial_failure FAILED           [ 57%]
tests/test_ops_service.py::test_ops_config_placeholder PASSED            [ 57%]
tests/test_ops_service.py::test_ops_config_real_blocks_shape PASSED      [ 57%]
tests/test_permissions.py::TestRolePermissions::test_admin_permissions PASSED [ 58%]
tests/test_permissions.py::TestRolePermissions::test_manager_permissions FAILED [ 58%]
tests/test_permissions.py::TestRolePermissions::test_developer_permissions PASSED [ 58%]
tests/test_permissions.py::TestRolePermissions::test_viewer_permissions PASSED [ 58%]
tests/test_permissions.py::TestRolePermissions::test_initialize_role_permissions ERROR [ 59%]
tests/test_permissions.py::TestPermissionChecks::test_admin_check_permission ERROR [ 59%]
tests/test_permissions.py::TestPermissionChecks::test_developer_can_create_api ERROR [ 59%]
tests/test_permissions.py::TestPermissionChecks::test_developer_cannot_delete_api ERROR [ 59%]
tests/test_permissions.py::TestPermissionChecks::test_viewer_can_read ERROR [ 60%]
tests/test_permissions.py::TestPermissionChecks::test_viewer_cannot_write ERROR [ 60%]
tests/test_permissions.py::TestResourcePermissions::test_grant_resource_permission ERROR [ 60%]
tests/test_permissions.py::TestResourcePermissions::test_grant_resource_type_permission ERROR [ 60%]
tests/test_permissions.py::TestResourcePermissions::test_check_resource_specific_permission ERROR [ 61%]
tests/test_permissions.py::TestResourcePermissions::test_check_resource_type_permission ERROR [ 61%]
tests/test_permissions.py::TestResourcePermissions::test_revoke_resource_permission ERROR [ 61%]
tests/test_permissions.py::TestPermissionExpiration::test_expired_permission_denied ERROR [ 61%]
tests/test_permissions.py::TestPermissionExpiration::test_future_permission_allowed ERROR [ 62%]
tests/test_permissions.py::TestListPermissions::test_list_user_permissions ERROR [ 62%]
tests/test_plan_multistep.py::TestBudgetSpec::test_budget_spec_defaults PASSED [ 62%]
tests/test_plan_multistep.py::TestBudgetSpec::test_budget_spec_custom_values PASSED [ 63%]
tests/test_plan_multistep.py::TestStepCondition::test_step_condition_equality PASSED [ 63%]
tests/test_plan_multistep.py::TestStepCondition::test_step_condition_numeric_value PASSED [ 63%]
tests/test_plan_multistep.py::TestPlanStep::test_plan_step_minimal PASSED [ 63%]
tests/test_plan_multistep.py::TestPlanStep::test_plan_step_with_navigation PASSED [ 64%]
tests/test_plan_multistep.py::TestPlanStep::test_plan_step_with_condition PASSED [ 64%]
tests/test_plan_multistep.py::TestPlanBranch::test_plan_branch_creation PASSED [ 64%]
tests/test_plan_multistep.py::TestPlanBranch::test_plan_branch_with_steps PASSED [ 64%]
tests/test_plan_multistep.py::TestPlanLoop::test_plan_loop_creation PASSED [ 65%]
tests/test_plan_multistep.py::TestPlanLoop::test_plan_loop_with_break_condition PASSED [ 65%]
tests/test_plan_multistep.py::TestPlanMultiStep::test_plan_single_step_execution PASSED [ 65%]
tests/test_plan_multistep.py::TestPlanMultiStep::test_plan_multi_step_sequence PASSED [ 65%]
tests/test_plan_multistep.py::TestPlanMultiStep::test_plan_with_branches PASSED [ 66%]
tests/test_plan_multistep.py::TestPlanMultiStep::test_plan_with_loops PASSED [ 66%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_simple_plan_success PASSED [ 66%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_duplicate_step_ids_fails PASSED [ 66%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_invalid_next_step_reference_fails PASSED [ 67%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_budget_exceeded_fails PASSED [ 67%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_with_custom_budget PASSED [ 67%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_multistep_disabled PASSED [ 67%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_complex_plan PASSED [ 68%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_timeout_invalid_range PASSED [ 68%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_timeout_exceeds_maximum PASSED [ 68%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_timeout_valid_range PASSED [ 68%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_max_depth_invalid_range PASSED [ 69%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_max_depth_exceeds_maximum PASSED [ 69%]
tests/test_plan_multistep.py::TestPlanValidation::test_validate_max_depth_valid_range PASSED [ 69%]
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_save_draft_requires_auth FAILED [ 69%]
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_save_draft_with_valid_token SKIPPED [ 70%]
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_invalid_token_rejected FAILED [ 70%]
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_missing_authorization_header_error FAILED [ 70%]
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_publish_requires_auth SKIPPED [ 70%]
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_rollback_requires_auth SKIPPED [ 71%]
tests/test_screen_editor_auth.py::TestScreenEditorAuthFlow::test_complete_screen_save_workflow SKIPPED [ 71%]
tests/test_screen_editor_auth.py::TestScreenEditorAuthFlow::test_publish_invalid_asset_returns_validation_error SKIPPED [ 71%]
tests/test_screen_editor_auth.py::TestScreenEditorAuthFlow::test_stage_published_endpoint_blocks_drafts SKIPPED [ 71%]
tests/test_screen_editor_auth.py::TestScreenEditorAuthFlow::test_token_in_authorization_header SKIPPED [ 72%]
tests/test_security_headers.py::TestSecurityHeaders::test_hsts_header_present PASSED [ 72%]
tests/test_security_headers.py::TestSecurityHeaders::test_hsts_include_subdomains PASSED [ 72%]
tests/test_security_headers.py::TestSecurityHeaders::test_csp_header_present PASSED [ 72%]
tests/test_security_headers.py::TestSecurityHeaders::test_x_frame_options_header PASSED [ 73%]
tests/test_security_headers.py::TestSecurityHeaders::test_x_content_type_options_header PASSED [ 73%]
tests/test_security_headers.py::TestSecurityHeaders::test_x_xss_protection_header PASSED [ 73%]
tests/test_security_headers.py::TestSecurityHeaders::test_referrer_policy_header PASSED [ 73%]
tests/test_security_headers.py::TestSecurityHeaders::test_permissions_policy_header PASSED [ 74%]
tests/test_security_headers.py::TestSecurityHeaders::test_headers_disabled PASSED [ 74%]
tests/test_security_headers.py::TestHTTPSRedirect::test_http_to_https_redirect PASSED [ 74%]
tests/test_security_headers.py::TestHTTPSRedirect::test_health_check_no_redirect PASSED [ 75%]
tests/test_security_headers.py::TestHTTPSRedirect::test_no_redirect_in_dev PASSED [ 75%]
tests/test_security_headers.py::TestHTTPSRedirect::test_redirect_disabled PASSED [ 75%]
tests/test_security_headers.py::TestCSRFMiddleware::test_csrf_token_on_get PASSED [ 75%]
tests/test_security_headers.py::TestCSRFMiddleware::test_csrf_token_in_header PASSED [ 76%]
tests/test_security_headers.py::TestCSRFMiddleware::test_csrf_token_mismatch PASSED [ 76%]
tests/test_security_headers.py::TestCSRFMiddleware::test_trusted_origin_bypass PASSED [ 76%]
tests/test_security_headers.py::TestCSRFMiddleware::test_csrf_disabled PASSED [ 76%]
tests/test_security_headers.py::TestCORSConfig::test_cors_origins_list PASSED [ 77%]
tests/test_security_headers.py::TestCORSConfig::test_cors_allow_credentials PASSED [ 77%]
tests/test_security_headers.py::TestCORSConfig::test_cors_allowed_methods PASSED [ 77%]
tests/test_security_headers.py::TestCORSConfig::test_cors_allowed_headers PASSED [ 77%]
tests/test_security_headers.py::TestCORSConfig::test_cors_exposed_headers PASSED [ 78%]
tests/test_security_headers.py::TestCORSConfig::test_cors_max_age PASSED [ 78%]
tests/test_security_headers.py::TestCORSConfig::test_cors_validate_origin PASSED [ 78%]
tests/test_security_headers.py::TestAddSecurityMiddleware::test_add_all_middleware PASSED [ 78%]
tests/test_security_headers.py::TestIntegration::test_full_security_stack PASSED [ 79%]
tests/test_security_headers.py::TestIntegration::test_health_endpoint_unaffected PASSED [ 79%]
tests/test_stage_executor.py::TestStageExecutor::test_initialization PASSED [ 79%]
tests/test_stage_executor.py::TestStageExecutor::test_resolve_asset_no_override PASSED [ 79%]
tests/test_stage_executor.py::TestStageExecutor::test_resolve_asset_with_override PASSED [ 80%]
tests/test_stage_executor.py::TestStageExecutor::test_execute_stage_route_plan PASSED [ 80%]
tests/test_stage_executor.py::TestStageExecutor::test_execute_stage_with_error PASSED [ 80%]
tests/test_stage_executor.py::TestStageExecutor::test_build_diagnostics_success PASSED [ 80%]
tests/test_stage_executor.py::TestStageExecutor::test_build_diagnostics_empty_result PASSED [ 81%]
tests/test_stage_executor.py::TestStageExecutor::test_build_diagnostics_with_errors PASSED [ 81%]
tests/test_stage_executor.py::TestStageExecutor::test_stage_input_output_tracking PASSED [ 81%]
tests/test_stage_executor.py::TestStageExecutor::test_multiple_stages_execution PASSED [ 81%]
tests/test_stage_executor.py::TestStageExecutor::test_test_mode_flag PASSED [ 82%]
tests/test_stage_executor.py::TestStageExecutor::test_baseline_comparison PASSED [ 82%]
tests/test_stage_executor.py::TestStageExecutor::test_diagnostics_counts PASSED [ 82%]
tests/test_stage_executor.py::TestStageExecutor::test_stage_unknown_handler PASSED [ 82%]
tests/test_stage_executor.py::TestStageExecutor::test_stage_with_references PASSED [ 83%]
tests/test_stage_executor.py::TestStageDiagnostics::test_diagnostics_creation PASSED [ 83%]
tests/test_stage_executor.py::TestStageDiagnostics::test_diagnostics_with_warnings PASSED [ 83%]
tests/test_stage_executor.py::TestStageDiagnostics::test_diagnostics_with_errors PASSED [ 83%]
tests/test_stage_executor.py::TestExecutionContext::test_context_creation PASSED [ 84%]
tests/test_stage_executor.py::TestExecutionContext::test_context_defaults PASSED [ 84%]
tests/test_trace_id.py::test_ops_query_includes_trace_id PASSED          [ 84%]
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id PASSED         [ 84%]
tests/test_trace_id.py::test_trace_id_persists_across_requests PASSED    [ 85%]
tests/test_trace_id.py::test_parent_trace_id_in_response PASSED          [ 85%]
tests/test_ui_actions_with_traces.py::test_list_maintenance_filtered_with_state_patch FAILED [ 85%]
tests/test_ui_actions_with_traces.py::test_create_maintenance_ticket_with_state_patch FAILED [ 85%]
tests/test_ui_actions_with_traces.py::test_ui_action_response_includes_state_patch PASSED [ 86%]
tests/test_ui_actions_with_traces.py::test_executor_result_includes_state_patch PASSED [ 86%]
tests/test_ui_contract.py::TestUIScreenBlock::test_ui_screen_block_structure PASSED [ 86%]
tests/test_ui_contract.py::TestUIScreenBlock::test_ui_screen_block_in_answer_block_union PASSED [ 86%]
tests/test_ui_contract.py::TestUIScreenBlock::test_ui_screen_block_optional_fields PASSED [ 87%]
tests/test_ui_contract.py::TestScreenAsset::test_screen_asset_create_schema PASSED [ 87%]
tests/test_ui_contract.py::TestScreenAsset::test_screen_asset_read_schema PASSED [ 87%]
tests/test_ui_contract.py::TestScreenAsset::test_screen_asset_with_tags PASSED [ 88%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_dot_path_access PASSED [ 88%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_missing_path PASSED [ 88%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_render_inputs PASSED [ 88%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_render_state PASSED [ 89%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_render_context PASSED [ 89%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_render_trace_id PASSED [ 89%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_missing_required_value PASSED [ 89%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_no_expressions PASSED [ 90%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_type_preservation PASSED [ 90%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_partial_expression_converts_to_string PASSED [ 90%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_validate_template PASSED [ 90%]
tests/test_ui_contract.py::TestBindingEngine::test_binding_mask_sensitive_inputs PASSED [ 91%]
tests/test_ui_contract.py::TestActionRegistry::test_action_registry_register_handler PASSED [ 91%]
tests/test_ui_contract.py::TestActionRegistry::test_action_registry_multiple_handlers PASSED [ 91%]
tests/test_ui_contract.py::TestIntegration::test_screen_asset_and_ui_screen_block_integration PASSED [ 91%]
tests/test_ui_contract.py::TestIntegration::test_binding_with_action_payload PASSED [ 92%]
tests/unit/test_api_manager.py::TestSQLValidator::test_validator_initialization PASSED [ 92%]
tests/unit/test_api_manager.py::TestSQLValidator::test_safe_select_query PASSED [ 92%]
tests/unit/test_api_manager.py::TestSQLValidator::test_dangerous_drop_keyword PASSED [ 92%]
tests/unit/test_api_manager.py::TestSQLValidator::test_dangerous_truncate_keyword PASSED [ 93%]
tests/unit/test_api_manager.py::TestSQLValidator::test_dangerous_delete_keyword PASSED [ 93%]
tests/unit/test_api_manager.py::TestSQLValidator::test_sql_injection_pattern_detection PASSED [ 93%]
tests/unit/test_api_manager.py::TestSQLValidator::test_protected_table_detection PASSED [ 93%]
tests/unit/test_api_manager.py::TestSQLValidator::test_performance_warning_select_star PASSED [ 94%]
tests/unit/test_api_manager.py::TestSQLValidator::test_performance_warning_missing_where PASSED [ 94%]
tests/unit/test_api_manager.py::TestSQLValidator::test_performance_warning_like_wildcard PASSED [ 94%]
tests/unit/test_api_manager.py::TestSQLValidator::test_table_extraction PASSED [ 94%]
tests/unit/test_api_manager.py::TestSQLValidator::test_validation_result_to_dict PASSED [ 95%]
tests/unit/test_api_manager.py::TestSQLValidator::test_multiple_joins_warning PASSED [ 95%]
tests/unit/test_api_manager.py::TestSQLValidator::test_or_conditions_warning PASSED [ 95%]
tests/unit/test_api_manager.py::TestSQLValidator::test_complex_valid_query PASSED [ 95%]
tests/unit/test_document_processor.py::TestDocumentProcessor::test_processor_initialization PASSED [ 96%]
tests/unit/test_document_processor.py::TestDocumentProcessor::test_supported_formats PASSED [ 96%]
tests/unit/test_document_processor.py::TestDocumentProcessor::test_invalid_format_raises_error PASSED [ 96%]
tests/unit/test_document_processor.py::TestDocumentProcessor::test_unsupported_file_format PASSED [ 96%]
tests/unit/test_document_processor.py::TestChunkingStrategy::test_split_sentences PASSED [ 97%]
tests/unit/test_document_processor.py::TestChunkingStrategy::test_chunk_text_basic PASSED [ 97%]
tests/unit/test_document_processor.py::TestChunkingStrategy::test_chunk_text_empty PASSED [ 97%]
tests/unit/test_document_processor.py::TestChunkingStrategy::test_chunk_table_basic PASSED [ 97%]
tests/unit/test_document_processor.py::TestChunkingStrategy::test_compute_source_hash PASSED [ 98%]
tests/unit/test_document_processor.py::TestChunkingStrategy::test_has_content_changed PASSED [ 98%]
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_json PASSED [ 98%]
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_csv PASSED [ 98%]
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_markdown PASSED [ 99%]
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_text PASSED [ 99%]
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_chunks_format_selection PASSED [ 99%]
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_unsupported_format PASSED [100%]

==================================== ERRORS ====================================
_____________ ERROR at setup of TestApiKeyCrud.test_create_api_key _____________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_____ ERROR at setup of TestApiKeyCrud.test_create_api_key_with_expiration _____
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_________ ERROR at setup of TestApiKeyCrud.test_validate_api_key_valid _________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
________ ERROR at setup of TestApiKeyCrud.test_validate_api_key_invalid ________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
________ ERROR at setup of TestApiKeyCrud.test_validate_api_key_expired ________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestApiKeyCrud.test_validate_api_key_inactive ________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
______________ ERROR at setup of TestApiKeyCrud.test_get_api_key _______________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_________ ERROR at setup of TestApiKeyCrud.test_get_api_key_wrong_user _________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_____________ ERROR at setup of TestApiKeyCrud.test_list_api_keys ______________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_____ ERROR at setup of TestApiKeyCrud.test_list_api_keys_exclude_inactive _____
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_____ ERROR at setup of TestApiKeyCrud.test_list_api_keys_include_inactive _____
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_____________ ERROR at setup of TestApiKeyCrud.test_revoke_api_key _____________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_________ ERROR at setup of TestApiKeyCrud.test_revoke_nonexistent_key _________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
__________ ERROR at setup of TestApiKeyScopes.test_get_api_key_scopes __________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
____________ ERROR at setup of TestApiKeyScopes.test_has_scope_true ____________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
___________ ERROR at setup of TestApiKeyScopes.test_has_scope_false ____________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestApiKeysRouter.test_create_api_key_endpoint _______
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestApiKeysRouter.test_list_api_keys_endpoint ________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestApiKeysRouter.test_revoke_api_key_endpoint _______
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_api_keys.py:39: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestCIChangeCreation.test_create_change_basic ________
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 20
      def test_create_change_basic(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:20
______ ERROR at setup of TestCIChangeCreation.test_create_change_minimal _______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 40
      def test_create_change_minimal(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:40
_____ ERROR at setup of TestCIChangeCreation.test_create_change_all_types ______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 55
      def test_create_change_all_types(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:55
_________ ERROR at setup of TestCIChangeCreation.test_get_change_by_id _________
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 76
      def test_get_change_by_id(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:76
_______ ERROR at setup of TestCIChangeCreation.test_get_change_not_found _______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 91
      def test_get_change_not_found(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:91
_________ ERROR at setup of TestCIChangeCreation.test_list_changes_all _________
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 96
      def test_list_changes_all(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:96
___ ERROR at setup of TestCIChangeCreation.test_list_changes_filter_by_ci_id ___
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 111
      def test_list_changes_filter_by_ci_id(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:111
__ ERROR at setup of TestCIChangeCreation.test_list_changes_filter_by_status ___
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 126
      def test_list_changes_filter_by_status(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:126
_____ ERROR at setup of TestCIChangeCreation.test_list_changes_pagination ______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 156
      def test_list_changes_pagination(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:156
__________ ERROR at setup of TestCIChangeApproval.test_approve_change __________
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 177
      def test_approve_change(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:177
__________ ERROR at setup of TestCIChangeApproval.test_reject_change ___________
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 201
      def test_reject_change(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:201
___ ERROR at setup of TestCIChangeApproval.test_approve_non_existent_change ____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 223
      def test_approve_non_existent_change(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:223
___________ ERROR at setup of TestCIChangeApproval.test_apply_change ___________
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 233
      def test_apply_change(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:233
__ ERROR at setup of TestCIChangeApproval.test_apply_unapproved_change_fails ___
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 255
      def test_apply_unapproved_change_fails(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:255
___ ERROR at setup of TestCIChangeHistory.test_get_change_history_single_ci ____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 272
      def test_get_change_history_single_ci(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:272
_______ ERROR at setup of TestCIChangeHistory.test_change_history_counts _______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 292
      def test_change_history_counts(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:292
_ ERROR at setup of TestCIChangeHistory.test_change_history_pending_approvals __
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 311
      def test_change_history_pending_approvals(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:311
___ ERROR at setup of TestCIIntegrityValidation.test_create_integrity_issue ____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 340
      def test_create_integrity_issue(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:340
____ ERROR at setup of TestCIIntegrityValidation.test_get_integrity_issues _____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 357
      def test_get_integrity_issues(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:357
_ ERROR at setup of TestCIIntegrityValidation.test_filter_integrity_issues_unresolved _
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 374
      def test_filter_integrity_issues_unresolved(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:374
___ ERROR at setup of TestCIIntegrityValidation.test_resolve_integrity_issue ___
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 405
      def test_resolve_integrity_issue(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:405
____ ERROR at setup of TestCIIntegrityValidation.test_validate_ci_integrity ____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 428
      def test_validate_ci_integrity(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:428
____ ERROR at setup of TestCIIntegrityValidation.test_get_integrity_summary ____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 443
      def test_get_integrity_summary(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:443
____ ERROR at setup of TestCIDuplicateDetection.test_create_duplicate_entry ____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 476
      def test_create_duplicate_entry(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:476
____ ERROR at setup of TestCIDuplicateDetection.test_get_duplicates_for_ci _____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 492
      def test_get_duplicates_for_ci(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:492
______ ERROR at setup of TestCIDuplicateDetection.test_confirm_duplicate _______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 508
      def test_confirm_duplicate(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:508
_____ ERROR at setup of TestCIDuplicateDetection.test_duplicate_statistics _____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 532
      def test_duplicate_statistics(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:532
_____ ERROR at setup of TestCIChangeStatistics.test_get_change_statistics ______
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 563
      def test_get_change_statistics(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:563
__ ERROR at setup of TestCIChangeStatistics.test_change_statistics_time_range __
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 580
      def test_change_statistics_time_range(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:580
__ ERROR at setup of TestCIIntegrationWorkflow.test_complete_change_workflow ___
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 615
      def test_complete_change_workflow(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:615
_ ERROR at setup of TestCIIntegrationWorkflow.test_duplicate_detection_to_merge_workflow _
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 648
      def test_duplicate_detection_to_merge_workflow(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:648
_ ERROR at setup of TestCIIntegrationWorkflow.test_integrity_validation_workflow _
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 684
      def test_integrity_validation_workflow(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:684
____ ERROR at setup of TestTenantIsolation.test_changes_isolated_by_tenant _____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 716
      def test_changes_isolated_by_tenant(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:716
_____ ERROR at setup of TestTenantIsolation.test_issues_isolated_by_tenant _____
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 741
      def test_issues_isolated_by_tenant(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:741
___ ERROR at setup of TestTenantIsolation.test_duplicates_isolated_by_tenant ___
file /home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py, line 767
      def test_duplicates_isolated_by_tenant(self, session: Session):
E       fixture 'session' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/spa/tobit-spa-ai/apps/api/tests/test_ci_management.py:767
___________ ERROR at setup of test_upload_creates_metadata_and_list ____________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_documents.py:36: in override_session
    SQLModel.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of test_document_stream_done_contains_references ________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_documents.py:36: in override_session
    SQLModel.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
____ ERROR at setup of TestRolePermissions.test_initialize_role_permissions ____
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
______ ERROR at setup of TestPermissionChecks.test_admin_check_permission ______
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_____ ERROR at setup of TestPermissionChecks.test_developer_can_create_api _____
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
___ ERROR at setup of TestPermissionChecks.test_developer_cannot_delete_api ____
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_________ ERROR at setup of TestPermissionChecks.test_viewer_can_read __________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestPermissionChecks.test_viewer_cannot_write ________
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
___ ERROR at setup of TestResourcePermissions.test_grant_resource_permission ___
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestResourcePermissions.test_grant_resource_type_permission _
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestResourcePermissions.test_check_resource_specific_permission _
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestResourcePermissions.test_check_resource_type_permission _
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
__ ERROR at setup of TestResourcePermissions.test_revoke_resource_permission ___
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
__ ERROR at setup of TestPermissionExpiration.test_expired_permission_denied ___
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
__ ERROR at setup of TestPermissionExpiration.test_future_permission_allowed ___
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
_______ ERROR at setup of TestListPermissions.test_list_user_permissions _______
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: index ix_tb_user_tenant_id already exists

The above exception was the direct cause of the following exception:
tests/test_permissions.py:35: in session
    TbUser.metadata.create_all(engine)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:5928: in create_all
    bind._run_ddl_visitor(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:3260: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2467: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:984: in visit_metadata
    self.traverse_single(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1530: in _execute_ddl
    ret = self._execute_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:952: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_tb_user_tenant_id already exists
E   [SQL: CREATE INDEX ix_tb_user_tenant_id ON tb_user (tenant_id)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
=================================== FAILURES ===================================
________________ TestResolverAsset.test_alias_mapping_creation _________________
tests/test_asset_models.py:307: in test_alias_mapping_creation
    mapping = AliasMapping(
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'cpu_usage'...'case_sensitive': False}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'cpu_usage'...'case_sensitive': False}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_________________ TestResolverAsset.test_pattern_rule_creation _________________
tests/test_asset_models.py:321: in test_pattern_rule_creation
    rule = PatternRule(
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for PatternRule
E   name
E     Field required [type=missing, input_value={'pattern': '^metric_(.+)...pu  monitoring.cpu']}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_____________ TestResolverAsset.test_transformation_rule_creation ______________
tests/test_asset_models.py:334: in test_transformation_rule_creation
    rule = TransformationRule(
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 3 validation errors for TransformationRule
E   name
E     Field required [type=missing, input_value={'input_format': 'snake_c..._name': 'to_camel_case'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   transformation_type
E     Field required [type=missing, input_value={'input_format': 'snake_c..._name': 'to_camel_case'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   field_name
E     Field required [type=missing, input_value={'input_format': 'snake_c..._name': 'to_camel_case'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_______________ TestResolverAsset.test_resolver_rule_with_alias ________________
tests/test_asset_models.py:347: in test_resolver_rule_with_alias
    alias = AliasMapping(
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'old_name', 'to_name': 'new_name'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'old_name', 'to_name': 'new_name'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_______________ TestResolverAsset.test_resolver_config_creation ________________
tests/test_asset_models.py:371: in test_resolver_config_creation
    alias_mapping=AliasMapping(from_name="a", to_name="b"),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'a', 'to_name': 'b'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'a', 'to_name': 'b'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
___________ TestResolverAsset.test_resolver_config_get_rule_by_name ____________
tests/test_asset_models.py:396: in test_resolver_config_get_rule_by_name
    alias_mapping=AliasMapping(from_name="x", to_name="y"),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'x', 'to_name': 'y'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'x', 'to_name': 'y'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
___________ TestResolverAsset.test_resolver_config_get_rules_by_type ___________
tests/test_asset_models.py:416: in test_resolver_config_get_rules_by_type
    alias_mapping=AliasMapping(from_name="a", to_name="b"),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'a', 'to_name': 'b'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'a', 'to_name': 'b'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
____________ TestResolverAsset.test_resolver_config_add_remove_rule ____________
tests/test_asset_models.py:443: in test_resolver_config_add_remove_rule
    config = ResolverConfig(rules=[])
             ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for ResolverConfig
E   name
E     Field required [type=missing, input_value={'rules': []}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
________________ TestResolverAsset.test_resolver_asset_creation ________________
tests/test_asset_models.py:462: in test_resolver_asset_creation
    config = ResolverConfig(rules=[], version="1.0.0")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for ResolverConfig
E   name
E     Field required [type=missing, input_value={'rules': [], 'version': '1.0.0'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   version
E     Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='1.0.0', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.12/v/int_parsing
________________ TestResolverAsset.test_rule_priority_ordering _________________
tests/test_asset_models.py:482: in test_rule_priority_ordering
    alias_mapping=AliasMapping(from_name="a", to_name="b"),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'a', 'to_name': 'b'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'a', 'to_name': 'b'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_____________ TestAssetIntegration.test_source_to_schema_reference _____________
tests/test_asset_models.py:516: in test_source_to_schema_reference
    source_conn = SourceConnection(
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SourceConnection
E   username
E     Field required [type=missing, input_value={'host': 'prod.example.com'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_________ TestAssetIntegration.test_resolver_with_multiple_rule_types __________
tests/test_asset_models.py:547: in test_resolver_with_multiple_rule_types
    alias_mapping=AliasMapping(from_name="old", to_name="new"),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.12/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for AliasMapping
E   source_entity
E     Field required [type=missing, input_value={'from_name': 'old', 'to_name': 'new'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   target_entity
E     Field required [type=missing, input_value={'from_name': 'old', 'to_name': 'new'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
________________________ test_ops_all_real_blocks_shape ________________________
tests/test_ops_service.py:115: in test_ops_all_real_blocks_shape
    assert envelope.blocks[0].title == "ALL summary"
E   AssertionError: assert 'LangGraph plan error' == 'ALL summary'
E     
E     - ALL summary
E     + LangGraph plan error
----------------------------- Captured stdout call -----------------------------
2026-01-22 17:16:36,530 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:36,530 INFO sqlalchemy.engine.Engine INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)
2026-01-22 17:16:36,530 INFO sqlalchemy.engine.Engine [cached since 3.335s ago] {'trace_id': '44109b3e9c62460599975b97c1ea2e8a', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'srv-erp-01 CPU   7 ', 'status': 'error', 'duration_ms': 279, 'request_payload': Json({'question': 'srv-erp-01 CPU   ... (59 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 36, 529715)}
2026-01-22 17:16:36,548 INFO sqlalchemy.engine.Engine ROLLBACK
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:36+0900 INFO app.shared.config_loader request_id=- tenant_id=- trace_id=- mode=- Loaded and cached resource: prompts/ops/langgraph.yaml taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG root request_id=- tenant_id=- trace_id=- mode=- LLM create_response: model=gpt-5-nano, input=[{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role':  taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Request options: {'method': 'post', 'url': '/responses', 'files': None, 'idempotency_key': 'stainless-python-retry-324a487a-2c9f-45ea-863a-d9adb9b8b726', 'json_data': {'input': [{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role': 'user', 'content': 'You are orchestrating OPS queries. The question is:\nsrv-erp-01 CPU   7 \n\nReturn only JSON that follows this schema:\n{\n  "run_metric": bool,\n  "run_hist": bool,\n  "run_graph": bool,\n  "time_hint": str | null,\n  "metric_hint": str | null,\n  "ci_hint": str | null\n}\n\nChoose the minimum set of executors needed to answer the question.\nHint fields help suffix the question to narrow the scope.\nIf unsure prefer both metric and hist.\n'}], 'model': 'gpt-5-nano', 'stream': False, 'temperature': 0.1, 'tools': None}} taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Sending HTTP Request: POST https://api.openai.com/v1/responses taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.connection request_id=- tenant_id=- trace_id=- mode=- close.started taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.connection request_id=- tenant_id=- trace_id=- mode=- close.complete taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.connection request_id=- tenant_id=- trace_id=- mode=- connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.connection request_id=- tenant_id=- trace_id=- mode=- connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f7b7de0c1d0> taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.connection request_id=- tenant_id=- trace_id=- mode=- start_tls.started ssl_context=<ssl.SSLContext object at 0x7f7b7fcfd4d0> server_hostname='api.openai.com' timeout=5.0 taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.connection request_id=- tenant_id=- trace_id=- mode=- start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f7b7de0d700> taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_headers.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_headers.complete taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_body.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_body.complete taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_headers.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Thu, 22 Jan 2026 08:16:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'191'), (b'Connection', b'keep-alive'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-kaavui2jbkapfiamtwmmzph7'), (b'openai-project', b'proj_qScKRtu1GYNIlwsdnYLEkSAp'), (b'x-request-id', b'req_a23925445e9241758ac897a5b92348a4'), (b'openai-processing-ms', b'26'), (b'x-envoy-upstream-service-time', b'29'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c1d9c335e083953-ICN'), (b'alt-svc', b'h3=":443"; ma=86400')]) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO httpx request_id=- tenant_id=- trace_id=- mode=- HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 400 Bad Request" taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_body.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_body.complete taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- response_closed.started taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- response_closed.complete taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- HTTP Response: POST https://api.openai.com/v1/responses "400 Bad Request" Headers({'date': 'Thu, 22 Jan 2026 08:16:36 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'openai-version': '2020-10-01', 'openai-organization': 'user-kaavui2jbkapfiamtwmmzph7', 'openai-project': 'proj_qScKRtu1GYNIlwsdnYLEkSAp', 'x-request-id': 'req_a23925445e9241758ac897a5b92348a4', 'openai-processing-ms': '26', 'x-envoy-upstream-service-time': '29', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9c1d9c335e083953-ICN', 'alt-svc': 'h3=":443"; ma=86400'}) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- request_id: req_a23925445e9241758ac897a5b92348a4 taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.openai.com/v1/responses'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400 taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Not retrying taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Re-raising status error taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 ERROR root request_id=- tenant_id=- trace_id=- mode=- LangGraph plan failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 43, in run
    plan = self._plan(question)
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 92, in _plan
    response = self._call_llm(prompt, system_prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 160, in _call_llm
    response = self._llm.create_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/llm/client.py", line 33, in create_response
    return self.client.responses.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/resources/responses/responses.py", line 866, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1259, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1047, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Unsupported parameter: 'temperature' is not supported with this model.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': None}} taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 3.335s ago] {'trace_id': '44109b3e9c62460599975b97c1ea2e8a', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'srv-erp-01 CPU   7 ', 'status': 'error', 'duration_ms': 279, 'request_payload': Json({'question': 'srv-erp-01 CPU   ... (59 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 36, 529715)} taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 ERROR root request_id=- tenant_id=- trace_id=- mode=- ops.trace.persist_failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
psycopg.errors.UndefinedColumn: "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 145, in handle_ops_query
    persist_execution_trace(
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/service.py", line 208, in persist_execution_trace
    return create_execution_trace(session, trace_entry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/crud.py", line 20, in create_execution_trace
    session.commit()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^
[SQL: INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)]
[parameters: {'trace_id': '44109b3e9c62460599975b97c1ea2e8a', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'srv-erp-01 CPU   7 ', 'status': 'error', 'duration_ms': 279, 'request_payload': Json({'question': 'srv-erp-01 CPU   ... (59 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 36, 529715)}]
(Background on this error at: https://sqlalche.me/e/20/f405) taskName=None asctime=2026-01-22T17:16:36+0900
------------------------------ Captured log call -------------------------------
INFO     app.shared.config_loader:config_loader.py:63 Loaded and cached resource: prompts/ops/langgraph.yaml
DEBUG    root:client.py:32 LLM create_response: model=gpt-5-nano, input=[{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role': 
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/responses', 'files': None, 'idempotency_key': 'stainless-python-retry-324a487a-2c9f-45ea-863a-d9adb9b8b726', 'json_data': {'input': [{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role': 'user', 'content': 'You are orchestrating OPS queries. The question is:\nsrv-erp-01 CPU   7 \n\nReturn only JSON that follows this schema:\n{\n  "run_metric": bool,\n  "run_hist": bool,\n  "run_graph": bool,\n  "time_hint": str | null,\n  "metric_hint": str | null,\n  "ci_hint": str | null\n}\n\nChoose the minimum set of executors needed to answer the question.\nHint fields help suffix the question to narrow the scope.\nIf unsure prefer both metric and hist.\n'}], 'model': 'gpt-5-nano', 'stream': False, 'temperature': 0.1, 'tools': None}}
DEBUG    openai._base_client:_base_client.py:978 Sending HTTP Request: POST https://api.openai.com/v1/responses
DEBUG    httpcore.connection:_trace.py:47 close.started
DEBUG    httpcore.connection:_trace.py:47 close.complete
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f7b7de0c1d0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x7f7b7fcfd4d0> server_hostname='api.openai.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f7b7de0d700>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Thu, 22 Jan 2026 08:16:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'191'), (b'Connection', b'keep-alive'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-kaavui2jbkapfiamtwmmzph7'), (b'openai-project', b'proj_qScKRtu1GYNIlwsdnYLEkSAp'), (b'x-request-id', b'req_a23925445e9241758ac897a5b92348a4'), (b'openai-processing-ms', b'26'), (b'x-envoy-upstream-service-time', b'29'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c1d9c335e083953-ICN'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO     httpx:_client.py:1025 HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 400 Bad Request"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1016 HTTP Response: POST https://api.openai.com/v1/responses "400 Bad Request" Headers({'date': 'Thu, 22 Jan 2026 08:16:36 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'openai-version': '2020-10-01', 'openai-organization': 'user-kaavui2jbkapfiamtwmmzph7', 'openai-project': 'proj_qScKRtu1GYNIlwsdnYLEkSAp', 'x-request-id': 'req_a23925445e9241758ac897a5b92348a4', 'openai-processing-ms': '26', 'x-envoy-upstream-service-time': '29', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9c1d9c335e083953-ICN', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG    openai._base_client:_base_client.py:1024 request_id: req_a23925445e9241758ac897a5b92348a4
DEBUG    openai._base_client:_base_client.py:1029 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.openai.com/v1/responses'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
DEBUG    openai._base_client:_base_client.py:782 Not retrying
DEBUG    openai._base_client:_base_client.py:1046 Re-raising status error
ERROR    root:langgraph.py:45 LangGraph plan failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 43, in run
    plan = self._plan(question)
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 92, in _plan
    response = self._call_llm(prompt, system_prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 160, in _call_llm
    response = self._llm.create_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/llm/client.py", line 33, in create_response
    return self.client.responses.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/resources/responses/responses.py", line 866, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1259, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1047, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Unsupported parameter: 'temperature' is not supported with this model.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': None}}
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 3.335s ago] {'trace_id': '44109b3e9c62460599975b97c1ea2e8a', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'srv-erp-01 CPU   7 ', 'status': 'error', 'duration_ms': 279, 'request_payload': Json({'question': 'srv-erp-01 CPU   ... (59 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 36, 529715)}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    root:__init__.py:164 ops.trace.persist_failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
psycopg.errors.UndefinedColumn: "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 145, in handle_ops_query
    persist_execution_trace(
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/service.py", line 208, in persist_execution_trace
    return create_execution_trace(session, trace_entry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/crud.py", line 20, in create_execution_trace
    session.commit()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^
[SQL: INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)]
[parameters: {'trace_id': '44109b3e9c62460599975b97c1ea2e8a', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'srv-erp-01 CPU   7 ', 'status': 'error', 'duration_ms': 279, 'request_payload': Json({'question': 'srv-erp-01 CPU   ... (59 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 36, 529715)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
________________ test_ops_all_langgraph_without_key_falls_back _________________
tests/test_ops_service.py:128: in test_ops_all_langgraph_without_key_falls_back
    envelope = handle_ops_query("all", "srv-erp-01 CPU   7 ")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/ops/services/__init__.py:97: in handle_ops_query
    result = _execute_real_mode(mode, question, settings)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/ops/services/__init__.py:181: in _execute_real_mode
    return executor(question, settings)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/ops/services/__init__.py:240: in _run_all
    return _run_all_rule_based(question, settings)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/ops/services/__init__.py:265: in _run_all_rule_based
    raise RuntimeError("ALL executors all failed" + (f": {'; '.join(errors)}" if errors else ""))
E   RuntimeError: ALL executors all failed: metric: too many values to unpack (expected 2); graph: too many values to unpack (expected 2)
----------------------------- Captured stdout call -----------------------------
2026-01-22 17:16:36,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:36,601 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
2026-01-22 17:16:36,602 INFO sqlalchemy.engine.Engine [cached since 3.579s ago] {'asset_type_1': 'query', 'scope_1': 'metric', 'name_1': 'metric_timeseries', 'status_1': 'published'}
2026-01-22 17:16:36,613 INFO sqlalchemy.engine.Engine ROLLBACK
2026-01-22 17:16:36,757 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:36,757 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
2026-01-22 17:16:36,757 INFO sqlalchemy.engine.Engine [cached since 3.735s ago] {'asset_type_1': 'query', 'scope_1': 'metric', 'name_1': 'metric_resolver', 'status_1': 'published'}
2026-01-22 17:16:36,768 INFO sqlalchemy.engine.Engine ROLLBACK
2026-01-22 17:16:37,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:37,447 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
2026-01-22 17:16:37,447 INFO sqlalchemy.engine.Engine [cached since 4.424s ago] {'asset_type_1': 'query', 'scope_1': 'graph', 'name_1': 'dependency_expand', 'status_1': 'published'}
2026-01-22 17:16:37,457 INFO sqlalchemy.engine.Engine ROLLBACK
2026-01-22 17:16:37,481 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:37,481 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
2026-01-22 17:16:37,481 INFO sqlalchemy.engine.Engine [cached since 4.459s ago] {'asset_type_1': 'query', 'scope_1': 'graph', 'name_1': 'component_composition', 'status_1': 'published'}
2026-01-22 17:16:37,491 INFO sqlalchemy.engine.Engine ROLLBACK
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:36+0900 WARNING root request_id=- tenant_id=- trace_id=- mode=- LangGraph requested but OpenAI API key missing; using rule-based ALL executor taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 3.579s ago] {'asset_type_1': 'query', 'scope_1': 'metric', 'name_1': 'metric_timeseries', 'status_1': 'published'} taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 ERROR app.shared.config_loader request_id=- tenant_id=- trace_id=- mode=- Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/metric/metric_timeseries.sql taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 WARNING app.modules.asset_registry.loader request_id=- tenant_id=- trace_id=- mode=- Query asset not found: metric_timeseries (scope=metric) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 3.735s ago] {'asset_type_1': 'query', 'scope_1': 'metric', 'name_1': 'metric_resolver', 'status_1': 'published'} taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 ERROR app.shared.config_loader request_id=- tenant_id=- trace_id=- mode=- Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/metric/metric_resolver.sql taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:36+0900 WARNING app.modules.asset_registry.loader request_id=- tenant_id=- trace_id=- mode=- Query asset not found: metric_resolver (scope=metric) taskName=None asctime=2026-01-22T17:16:36+0900
2026-01-22T17:16:37+0900 ERROR root request_id=- tenant_id=- trace_id=- mode=- ALL executor metric failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 256, in _run_all_rule_based
    executor_blocks, executor_tools = executor(question, settings)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 4.424s ago] {'asset_type_1': 'query', 'scope_1': 'graph', 'name_1': 'dependency_expand', 'status_1': 'published'} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 ERROR app.shared.config_loader request_id=- tenant_id=- trace_id=- mode=- Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/graph/dependency_expand.sql taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 WARNING app.modules.asset_registry.loader request_id=- tenant_id=- trace_id=- mode=- Query asset not found: dependency_expand (scope=graph) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 4.459s ago] {'asset_type_1': 'query', 'scope_1': 'graph', 'name_1': 'component_composition', 'status_1': 'published'} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 ERROR app.shared.config_loader request_id=- tenant_id=- trace_id=- mode=- Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/graph/component_composition.sql taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 WARNING app.modules.asset_registry.loader request_id=- tenant_id=- trace_id=- mode=- Query asset not found: component_composition (scope=graph) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.pool request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <POOL> created, direct address IPv4Address(('115.21.12.151', 7687)) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <WORKSPACE> routing towards fixed database: None taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <WORKSPACE> pinning database: None taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.pool request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False) taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.pool request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <POOL> trying to hand out new connection taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <RESOLVE> in: 115.21.12.151:7687 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <RESOLVE> dns resolver out: 115.21.12.151:7687 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#0000]  C: <OPEN> 115.21.12.151:7687 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: <MAGIC> 0x6060B017 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: <HANDSHAKE> 0x00000003 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: HELLO {'user_agent': 'neo4j-python/6.1.0 Python/3.12.3-final-0 (linux)', 'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  _: <CONNECTION> client state: CONNECTED > READY taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: SUCCESS {'server': 'Neo4j/3.5.35', 'connection_id': 'bolt-122'} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  _: <CONNECTION> server state: CONNECTED > READY taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: RUN '\nMATCH (n:CI)\nWHERE n.tenant_id = $tenant_id AND n.ci_code = $ci_code\nMATCH path = (n)-[r*1..3]-(m:CI)\nWHERE m.tenant_id = $tenant_id\nRETURN n, relationships(path) AS r, m\nLIMIT 300\n' {'tenant_id': 't1', 'ci_code': 'srv-erp-01', 'depth': 3} {} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  _: <CONNECTION> client state: READY > STREAMING taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: PULL_ALL taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: SUCCESS {'t_first': 1, 'fields': ['n', 'r', 'm']} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  _: <CONNECTION> server state: READY > STREAMING taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: RECORD * 1 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  S: SUCCESS {'bookmark': 'neo4j:bookmark:v1:tx6070', 'type': 'r', 't_last': 24} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  _: <CONNECTION> server state: STREAMING > READY taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.pool request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  _: <POOL> released bolt-122 taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.pool request_id=- tenant_id=- trace_id=- mode=- [#0000]  _: <POOL> close taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: GOODBYE taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG neo4j.io request_id=- tenant_id=- trace_id=- mode=- [#CF5C]  C: <CLOSE> taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 ERROR root request_id=- tenant_id=- trace_id=- mode=- ALL executor graph failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 256, in _run_all_rule_based
    executor_blocks, executor_tools = executor(question, settings)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2) taskName=None asctime=2026-01-22T17:16:37+0900
------------------------------ Captured log call -------------------------------
WARNING  root:__init__.py:239 LangGraph requested but OpenAI API key missing; using rule-based ALL executor
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 3.579s ago] {'asset_type_1': 'query', 'scope_1': 'metric', 'name_1': 'metric_timeseries', 'status_1': 'published'}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    app.shared.config_loader:config_loader.py:48 Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/metric/metric_timeseries.sql
WARNING  app.modules.asset_registry.loader:loader.py:353 Query asset not found: metric_timeseries (scope=metric)
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 3.735s ago] {'asset_type_1': 'query', 'scope_1': 'metric', 'name_1': 'metric_resolver', 'status_1': 'published'}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    app.shared.config_loader:config_loader.py:48 Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/metric/metric_resolver.sql
WARNING  app.modules.asset_registry.loader:loader.py:353 Query asset not found: metric_resolver (scope=metric)
ERROR    root:__init__.py:262 ALL executor metric failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 256, in _run_all_rule_based
    executor_blocks, executor_tools = executor(question, settings)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.424s ago] {'asset_type_1': 'query', 'scope_1': 'graph', 'name_1': 'dependency_expand', 'status_1': 'published'}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    app.shared.config_loader:config_loader.py:48 Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/graph/dependency_expand.sql
WARNING  app.modules.asset_registry.loader:loader.py:353 Query asset not found: dependency_expand (scope=graph)
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_type = %(asset_type_1)s::VARCHAR AND tb_asset_registry.scope = %(scope_1)s::VARCHAR AND tb_asset_registry.name = %(name_1)s::VARCHAR AND tb_asset_registry.status = %(status_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.459s ago] {'asset_type_1': 'query', 'scope_1': 'graph', 'name_1': 'component_composition', 'status_1': 'published'}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    app.shared.config_loader:config_loader.py:48 Resource file not found: /home/spa/tobit-spa-ai/apps/api/resources/queries/graph/component_composition.sql
WARNING  app.modules.asset_registry.loader:loader.py:353 Query asset not found: component_composition (scope=graph)
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('115.21.12.151', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 115.21.12.151:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 115.21.12.151:7687
DEBUG    neo4j.io:_bolt_socket.py:511 [#0000]  C: <OPEN> 115.21.12.151:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#CF5C]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#CF5C]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#CF5C]  S: <HANDSHAKE> 0x00000003
DEBUG    neo4j.io:_bolt3.py:225 [#CF5C]  C: HELLO {'user_agent': 'neo4j-python/6.1.0 Python/3.12.3-final-0 (linux)', 'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt3.py:179 [#CF5C]  _: <CONNECTION> client state: CONNECTED > READY
DEBUG    neo4j.io:_bolt3.py:562 [#CF5C]  S: SUCCESS {'server': 'Neo4j/3.5.35', 'connection_id': 'bolt-122'}
DEBUG    neo4j.io:_bolt3.py:168 [#CF5C]  _: <CONNECTION> server state: CONNECTED > READY
DEBUG    neo4j.io:_bolt3.py:371 [#CF5C]  C: RUN '\nMATCH (n:CI)\nWHERE n.tenant_id = $tenant_id AND n.ci_code = $ci_code\nMATCH path = (n)-[r*1..3]-(m:CI)\nWHERE m.tenant_id = $tenant_id\nRETURN n, relationships(path) AS r, m\nLIMIT 300\n' {'tenant_id': 't1', 'ci_code': 'srv-erp-01', 'depth': 3} {}
DEBUG    neo4j.io:_bolt3.py:179 [#CF5C]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt3.py:413 [#CF5C]  C: PULL_ALL
DEBUG    neo4j.io:_bolt3.py:562 [#CF5C]  S: SUCCESS {'t_first': 1, 'fields': ['n', 'r', 'm']}
DEBUG    neo4j.io:_bolt3.py:168 [#CF5C]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:553 [#CF5C]  S: RECORD * 1
DEBUG    neo4j.io:_bolt3.py:562 [#CF5C]  S: SUCCESS {'bookmark': 'neo4j:bookmark:v1:tx6070', 'type': 'r', 't_last': 24}
DEBUG    neo4j.io:_bolt3.py:168 [#CF5C]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#CF5C]  _: <POOL> released bolt-122
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt3.py:531 [#CF5C]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1006 [#CF5C]  C: <CLOSE>
ERROR    root:__init__.py:262 ALL executor graph failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 256, in _run_all_rule_based
    executor_blocks, executor_tools = executor(question, settings)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
_________________________ test_ops_all_partial_failure _________________________
tests/test_ops_service.py:185: in test_ops_all_partial_failure
    assert envelope.meta.error and "hist service unavailable" in envelope.meta.error
E   assert ('Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}' and 'hist service unavailable' in 'Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}')
E    +  where 'Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}' = AnswerMeta(route='all', route_reason='OPS real mode', timing_ms=692, summary='Real mode response for all', used_tools=['prompt'], fallback=False, error='Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}', trace_id='7750fabb6ae7430f8fbe14ad0283e656', parent_trace_id=None).error
E    +    where AnswerMeta(route='all', route_reason='OPS real mode', timing_ms=692, summary='Real mode response for all', used_tools=['prompt'], fallback=False, error='Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}', trace_id='7750fabb6ae7430f8fbe14ad0283e656', parent_trace_id=None) = AnswerEnvelope(meta=AnswerMeta(route='all', route_reason='OPS real mode', timing_ms=692, summary='Real mode response for all', used_tools=['prompt'], fallback=False, error='Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}', trace_id='7750fabb6ae7430f8fbe14ad0283e656', parent_trace_id=None), blocks=[MarkdownBlock(type='markdown', title='LangGraph plan error', content='    LLM     .', id=None)]).meta
E    +  and   'Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}' = AnswerMeta(route='all', route_reason='OPS real mode', timing_ms=692, summary='Real mode response for all', used_tools=['prompt'], fallback=False, error='Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}', trace_id='7750fabb6ae7430f8fbe14ad0283e656', parent_trace_id=None).error
E    +    where AnswerMeta(route='all', route_reason='OPS real mode', timing_ms=692, summary='Real mode response for all', used_tools=['prompt'], fallback=False, error='Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}', trace_id='7750fabb6ae7430f8fbe14ad0283e656', parent_trace_id=None) = AnswerEnvelope(meta=AnswerMeta(route='all', route_reason='OPS real mode', timing_ms=692, summary='Real mode response for all', used_tools=['prompt'], fallback=False, error='Error code: 400 - {\'error\': {\'message\': "Unsupported parameter: \'temperature\' is not supported with this model.", \'type\': \'invalid_request_error\', \'param\': \'temperature\', \'code\': None}}', trace_id='7750fabb6ae7430f8fbe14ad0283e656', parent_trace_id=None), blocks=[MarkdownBlock(type='markdown', title='LangGraph plan error', content='    LLM     .', id=None)]).meta
----------------------------- Captured stdout call -----------------------------
2026-01-22 17:16:38,484 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:38,485 INFO sqlalchemy.engine.Engine INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)
2026-01-22 17:16:38,485 INFO sqlalchemy.engine.Engine [cached since 5.29s ago] {'trace_id': '7750fabb6ae7430f8fbe14ad0283e656', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'stub question', 'status': 'error', 'duration_ms': 692, 'request_payload': Json({'question': 'stub question', 'mode ... (44 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 38, 484486)}
2026-01-22 17:16:38,522 INFO sqlalchemy.engine.Engine ROLLBACK
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:37+0900 DEBUG root request_id=- tenant_id=- trace_id=- mode=- LLM create_response: model=gpt-5-nano, input=[{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role':  taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Request options: {'method': 'post', 'url': '/responses', 'files': None, 'idempotency_key': 'stainless-python-retry-c13e48ce-d8c7-4a59-93dd-140f56e2323c', 'json_data': {'input': [{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role': 'user', 'content': 'You are orchestrating OPS queries. The question is:\nstub question\n\nReturn only JSON that follows this schema:\n{\n  "run_metric": bool,\n  "run_hist": bool,\n  "run_graph": bool,\n  "time_hint": str | null,\n  "metric_hint": str | null,\n  "ci_hint": str | null\n}\n\nChoose the minimum set of executors needed to answer the question.\nHint fields help suffix the question to narrow the scope.\nIf unsure prefer both metric and hist.\n'}], 'model': 'gpt-5-nano', 'stream': False, 'temperature': 0.1, 'tools': None}} taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Sending HTTP Request: POST https://api.openai.com/v1/responses taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_headers.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_headers.complete taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_body.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- send_request_body.complete taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:37+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_headers.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:37+0900
2026-01-22T17:16:38+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Thu, 22 Jan 2026 08:16:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'191'), (b'Connection', b'keep-alive'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-kaavui2jbkapfiamtwmmzph7'), (b'openai-project', b'proj_qScKRtu1GYNIlwsdnYLEkSAp'), (b'x-request-id', b'req_5c1a6395ecfa4390a3f353b7321a997f'), (b'openai-processing-ms', b'46'), (b'x-envoy-upstream-service-time', b'49'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c1d9c3ccc113953-ICN'), (b'alt-svc', b'h3=":443"; ma=86400')]) taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 INFO httpx request_id=- tenant_id=- trace_id=- mode=- HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 400 Bad Request" taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_body.started request=<Request [b'POST']> taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- receive_response_body.complete taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- response_closed.started taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG httpcore.http11 request_id=- tenant_id=- trace_id=- mode=- response_closed.complete taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- HTTP Response: POST https://api.openai.com/v1/responses "400 Bad Request" Headers({'date': 'Thu, 22 Jan 2026 08:16:38 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'openai-version': '2020-10-01', 'openai-organization': 'user-kaavui2jbkapfiamtwmmzph7', 'openai-project': 'proj_qScKRtu1GYNIlwsdnYLEkSAp', 'x-request-id': 'req_5c1a6395ecfa4390a3f353b7321a997f', 'openai-processing-ms': '46', 'x-envoy-upstream-service-time': '49', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9c1d9c3ccc113953-ICN', 'alt-svc': 'h3=":443"; ma=86400'}) taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- request_id: req_5c1a6395ecfa4390a3f353b7321a997f taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.openai.com/v1/responses'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400 taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Not retrying taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 DEBUG openai._base_client request_id=- tenant_id=- trace_id=- mode=- Re-raising status error taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 ERROR root request_id=- tenant_id=- trace_id=- mode=- LangGraph plan failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 43, in run
    plan = self._plan(question)
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 92, in _plan
    response = self._call_llm(prompt, system_prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 160, in _call_llm
    response = self._llm.create_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/llm/client.py", line 33, in create_response
    return self.client.responses.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/resources/responses/responses.py", line 866, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1259, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1047, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Unsupported parameter: 'temperature' is not supported with this model.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': None}} taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE) taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 5.29s ago] {'trace_id': '7750fabb6ae7430f8fbe14ad0283e656', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'stub question', 'status': 'error', 'duration_ms': 692, 'request_payload': Json({'question': 'stub question', 'mode ... (44 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 38, 484486)} taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:38+0900
2026-01-22T17:16:38+0900 ERROR root request_id=- tenant_id=- trace_id=- mode=- ops.trace.persist_failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
psycopg.errors.UndefinedColumn: "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 145, in handle_ops_query
    persist_execution_trace(
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/service.py", line 208, in persist_execution_trace
    return create_execution_trace(session, trace_entry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/crud.py", line 20, in create_execution_trace
    session.commit()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^
[SQL: INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)]
[parameters: {'trace_id': '7750fabb6ae7430f8fbe14ad0283e656', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'stub question', 'status': 'error', 'duration_ms': 692, 'request_payload': Json({'question': 'stub question', 'mode ... (44 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 38, 484486)}]
(Background on this error at: https://sqlalche.me/e/20/f405) taskName=None asctime=2026-01-22T17:16:38+0900
------------------------------ Captured log call -------------------------------
DEBUG    root:client.py:32 LLM create_response: model=gpt-5-nano, input=[{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role': 
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/responses', 'files': None, 'idempotency_key': 'stainless-python-retry-c13e48ce-d8c7-4a59-93dd-140f56e2323c', 'json_data': {'input': [{'role': 'system', 'content': 'You are a deterministic LangGraph planner/aggregator.\n'}, {'role': 'user', 'content': 'You are orchestrating OPS queries. The question is:\nstub question\n\nReturn only JSON that follows this schema:\n{\n  "run_metric": bool,\n  "run_hist": bool,\n  "run_graph": bool,\n  "time_hint": str | null,\n  "metric_hint": str | null,\n  "ci_hint": str | null\n}\n\nChoose the minimum set of executors needed to answer the question.\nHint fields help suffix the question to narrow the scope.\nIf unsure prefer both metric and hist.\n'}], 'model': 'gpt-5-nano', 'stream': False, 'temperature': 0.1, 'tools': None}}
DEBUG    openai._base_client:_base_client.py:978 Sending HTTP Request: POST https://api.openai.com/v1/responses
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Thu, 22 Jan 2026 08:16:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'191'), (b'Connection', b'keep-alive'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-kaavui2jbkapfiamtwmmzph7'), (b'openai-project', b'proj_qScKRtu1GYNIlwsdnYLEkSAp'), (b'x-request-id', b'req_5c1a6395ecfa4390a3f353b7321a997f'), (b'openai-processing-ms', b'46'), (b'x-envoy-upstream-service-time', b'49'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c1d9c3ccc113953-ICN'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO     httpx:_client.py:1025 HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 400 Bad Request"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1016 HTTP Response: POST https://api.openai.com/v1/responses "400 Bad Request" Headers({'date': 'Thu, 22 Jan 2026 08:16:38 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'openai-version': '2020-10-01', 'openai-organization': 'user-kaavui2jbkapfiamtwmmzph7', 'openai-project': 'proj_qScKRtu1GYNIlwsdnYLEkSAp', 'x-request-id': 'req_5c1a6395ecfa4390a3f353b7321a997f', 'openai-processing-ms': '46', 'x-envoy-upstream-service-time': '49', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9c1d9c3ccc113953-ICN', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG    openai._base_client:_base_client.py:1024 request_id: req_5c1a6395ecfa4390a3f353b7321a997f
DEBUG    openai._base_client:_base_client.py:1029 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.openai.com/v1/responses'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
DEBUG    openai._base_client:_base_client.py:782 Not retrying
DEBUG    openai._base_client:_base_client.py:1046 Re-raising status error
ERROR    root:langgraph.py:45 LangGraph plan failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 43, in run
    plan = self._plan(question)
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 92, in _plan
    response = self._call_llm(prompt, system_prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/langgraph.py", line 160, in _call_llm
    response = self._llm.create_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/llm/client.py", line 33, in create_response
    return self.client.responses.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/resources/responses/responses.py", line 866, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1259, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1047, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Unsupported parameter: 'temperature' is not supported with this model.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': None}}
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.29s ago] {'trace_id': '7750fabb6ae7430f8fbe14ad0283e656', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'stub question', 'status': 'error', 'duration_ms': 692, 'request_payload': Json({'question': 'stub question', 'mode ... (44 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 38, 484486)}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    root:__init__.py:164 ops.trace.persist_failed
Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
psycopg.errors.UndefinedColumn: "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/__init__.py", line 145, in handle_ops_query
    persist_execution_trace(
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/service.py", line 208, in persist_execution_trace
    return create_execution_trace(session, trace_entry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/app/modules/inspector/crud.py", line 20, in create_execution_trace
    session.commit()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/psycopg/cursor.py", line 117, in execute
    raise ex.with_traceback(None)
sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) "route"  "tb_execution_trace" (relation) 
LINE 1: ...ces", answer, ui_render, audit_links, flow_spans, route, sta...
                                                             ^
[SQL: INSERT INTO tb_execution_trace (trace_id, parent_trace_id, feature, endpoint, method, ops_mode, question, status, duration_ms, request_payload, applied_assets, asset_versions, fallbacks, plan_raw, plan_validated, execution_steps, "references", answer, ui_render, audit_links, flow_spans, route, stage_inputs, stage_outputs, replan_events, created_at) VALUES (%(trace_id)s::VARCHAR, %(parent_trace_id)s::VARCHAR, %(feature)s::VARCHAR, %(endpoint)s::VARCHAR, %(method)s::VARCHAR, %(ops_mode)s::VARCHAR, %(question)s::VARCHAR, %(status)s::VARCHAR, %(duration_ms)s::INTEGER, %(request_payload)s::JSON, %(applied_assets)s::JSON, %(asset_versions)s::JSON, %(fallbacks)s::JSON, %(plan_raw)s::JSON, %(plan_validated)s::JSON, %(execution_steps)s::JSON, %(references)s::JSON, %(answer)s::JSON, %(ui_render)s::JSON, %(audit_links)s::JSON, %(flow_spans)s::JSON, %(route)s::VARCHAR, %(stage_inputs)s::JSON, %(stage_outputs)s::JSON, %(replan_events)s::JSON, %(created_at)s::TIMESTAMP WITH TIME ZONE)]
[parameters: {'trace_id': '7750fabb6ae7430f8fbe14ad0283e656', 'parent_trace_id': None, 'feature': 'all', 'endpoint': '/ops/query', 'method': 'POST', 'ops_mode': 'real', 'question': 'stub question', 'status': 'error', 'duration_ms': 692, 'request_payload': Json({'question': 'stub question', 'mode ... (44 chars)), 'applied_assets': Json({'prompt': None, 'policy': None, 'm ... (79 chars)), 'asset_versions': Json(None), 'fallbacks': Json({'prompt': True, 'policy': True, 'm ... (65 chars)), 'plan_raw': Json(None), 'plan_validated': Json(None), 'execution_steps': Json([]), 'references': Json([]), 'answer': Json({'envelope_meta': {'route': 'all',  ... (592 chars)), 'ui_render': Json(None), 'audit_links': Json({'related_audit_log_ids': []}), 'flow_spans': Json(None), 'route': 'orch', 'stage_inputs': Json([]), 'stage_outputs': Json([]), 'replan_events': Json([]), 'created_at': datetime.datetime(2026, 1, 22, 8, 16, 38, 484486)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
_________________ TestRolePermissions.test_manager_permissions _________________
tests/test_permissions.py:132: in test_manager_permissions
    assert ResourcePermission.API_DELETE in perms
E   AssertionError: assert <ResourcePermission.API_DELETE: 'api:delete'> in [<ResourcePermission.API_READ: 'api:read'>, <ResourcePermission.API_CREATE: 'api:create'>, <ResourcePermission.API_UPDATE: 'api:update'>, <ResourcePermission.API_EXECUTE: 'api:execute'>, <ResourcePermission.API_EXPORT: 'api:export'>, <ResourcePermission.CI_READ: 'ci:read'>, ...]
E    +  where <ResourcePermission.API_DELETE: 'api:delete'> = ResourcePermission.API_DELETE
______________ TestScreenEditorAuth.test_save_draft_requires_auth ______________
tests/test_screen_editor_auth.py:72: in test_save_draft_requires_auth
    assert response.status_code == 401
E   assert 200 == 401
E    +  where 200 = <Response [200 OK]>.status_code
----------------------------- Captured stdout call -----------------------------
2026-01-22 17:16:43,172 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,174 INFO sqlalchemy.engine.Engine SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR
2026-01-22 17:16:43,174 INFO sqlalchemy.engine.Engine [generated in 0.00031s] {'username_1': 'admin@tobit.local'}
2026-01-22 17:16:43,187 INFO sqlalchemy.engine.Engine INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE)
2026-01-22 17:16:43,187 INFO sqlalchemy.engine.Engine [generated in 0.00045s] {'asset_id': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 185150), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 185441)}
2026-01-22 17:16:43,200 INFO sqlalchemy.engine.Engine COMMIT
2026-01-22 17:16:43,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,221 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
2026-01-22 17:16:43,221 INFO sqlalchemy.engine.Engine [generated in 0.00032s] {'pk_1': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec')}
2026-01-22 17:16:43,244 INFO sqlalchemy.engine.Engine INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER)
2026-01-22 17:16:43,245 INFO sqlalchemy.engine.Engine [generated in 0.00035s] {'history_id': UUID('3195af1f-c5f5-4f82-b947-8fcb7ee3a2e8'), 'asset_id': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 243986), 'rollback_from_version': None}
2026-01-22 17:16:43,259 INFO sqlalchemy.engine.Engine COMMIT
2026-01-22 17:16:43,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,281 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
2026-01-22 17:16:43,281 INFO sqlalchemy.engine.Engine [generated in 0.00033s] {'pk_1': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec')}
2026-01-22 17:16:43,304 INFO sqlalchemy.engine.Engine ROLLBACK
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:43+0900 DEBUG asyncio request_id=- tenant_id=- trace_id=- mode=- Using selector: EpollSelector taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [generated in 0.00031s] {'username_1': 'admin@tobit.local'} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [generated in 0.00045s] {'asset_id': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 185150), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 185441)} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- COMMIT taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [generated in 0.00032s] {'pk_1': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec')} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [generated in 0.00035s] {'history_id': UUID('3195af1f-c5f5-4f82-b947-8fcb7ee3a2e8'), 'asset_id': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 243986), 'rollback_from_version': None} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- COMMIT taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [generated in 0.00033s] {'pk_1': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec')} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO httpx request_id=- tenant_id=- trace_id=- mode=- HTTP Request: POST http://testserver/asset-registry/assets "HTTP/1.1 200 OK" taskName=None asctime=2026-01-22T17:16:43+0900
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00031s] {'username_1': 'admin@tobit.local'}
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00045s] {'asset_id': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 185150), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 185441)}
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00032s] {'pk_1': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec')}
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00035s] {'history_id': UUID('3195af1f-c5f5-4f82-b947-8fcb7ee3a2e8'), 'asset_id': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 243986), 'rollback_from_version': None}
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00033s] {'pk_1': UUID('e48958e0-2119-48e3-b008-7fa63ced27ec')}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/asset-registry/assets "HTTP/1.1 200 OK"
_______________ TestScreenEditorAuth.test_invalid_token_rejected _______________
tests/test_screen_editor_auth.py:117: in test_invalid_token_rejected
    assert response.status_code == 401
E   assert 200 == 401
E    +  where 200 = <Response [200 OK]>.status_code
----------------------------- Captured stdout call -----------------------------
2026-01-22 17:16:43,654 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,655 INFO sqlalchemy.engine.Engine SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR
2026-01-22 17:16:43,655 INFO sqlalchemy.engine.Engine [cached since 0.4813s ago] {'username_1': 'admin@tobit.local'}
2026-01-22 17:16:43,671 INFO sqlalchemy.engine.Engine INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE)
2026-01-22 17:16:43,671 INFO sqlalchemy.engine.Engine [cached since 0.4847s ago] {'asset_id': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 671142), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 671336)}
2026-01-22 17:16:43,687 INFO sqlalchemy.engine.Engine COMMIT
2026-01-22 17:16:43,706 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,707 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
2026-01-22 17:16:43,707 INFO sqlalchemy.engine.Engine [cached since 0.4865s ago] {'pk_1': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a')}
2026-01-22 17:16:43,731 INFO sqlalchemy.engine.Engine INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER)
2026-01-22 17:16:43,731 INFO sqlalchemy.engine.Engine [cached since 0.4867s ago] {'history_id': UUID('872b6697-0ce1-441a-9472-5a91bb2d6e28'), 'asset_id': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 730966), 'rollback_from_version': None}
2026-01-22 17:16:43,746 INFO sqlalchemy.engine.Engine COMMIT
2026-01-22 17:16:43,766 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,767 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
2026-01-22 17:16:43,767 INFO sqlalchemy.engine.Engine [cached since 0.4859s ago] {'pk_1': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a')}
2026-01-22 17:16:43,791 INFO sqlalchemy.engine.Engine ROLLBACK
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:43+0900 DEBUG asyncio request_id=- tenant_id=- trace_id=- mode=- Using selector: EpollSelector taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.4813s ago] {'username_1': 'admin@tobit.local'} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.4847s ago] {'asset_id': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 671142), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 671336)} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- COMMIT taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.4865s ago] {'pk_1': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a')} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.4867s ago] {'history_id': UUID('872b6697-0ce1-441a-9472-5a91bb2d6e28'), 'asset_id': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 730966), 'rollback_from_version': None} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- COMMIT taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.4859s ago] {'pk_1': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a')} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO httpx request_id=- tenant_id=- trace_id=- mode=- HTTP Request: POST http://testserver/asset-registry/assets "HTTP/1.1 200 OK" taskName=None asctime=2026-01-22T17:16:43+0900
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4813s ago] {'username_1': 'admin@tobit.local'}
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4847s ago] {'asset_id': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 671142), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 671336)}
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4865s ago] {'pk_1': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a')}
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4867s ago] {'history_id': UUID('872b6697-0ce1-441a-9472-5a91bb2d6e28'), 'asset_id': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 730966), 'rollback_from_version': None}
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4859s ago] {'pk_1': UUID('db9a3f4a-94f9-4d92-8105-19664f22822a')}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/asset-registry/assets "HTTP/1.1 200 OK"
_________ TestScreenEditorAuth.test_missing_authorization_header_error _________
tests/test_screen_editor_auth.py:138: in test_missing_authorization_header_error
    assert response.status_code == 401
E   assert 200 == 401
E    +  where 200 = <Response [200 OK]>.status_code
----------------------------- Captured stdout call -----------------------------
2026-01-22 17:16:43,820 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,820 INFO sqlalchemy.engine.Engine SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR
2026-01-22 17:16:43,821 INFO sqlalchemy.engine.Engine [cached since 0.647s ago] {'username_1': 'admin@tobit.local'}
2026-01-22 17:16:43,834 INFO sqlalchemy.engine.Engine INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE)
2026-01-22 17:16:43,834 INFO sqlalchemy.engine.Engine [cached since 0.6476s ago] {'asset_id': UUID('324036c3-614a-4209-b69f-9a535ea25bac'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 834108), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 834266)}
2026-01-22 17:16:43,849 INFO sqlalchemy.engine.Engine COMMIT
2026-01-22 17:16:43,862 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,863 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
2026-01-22 17:16:43,863 INFO sqlalchemy.engine.Engine [cached since 0.6422s ago] {'pk_1': UUID('324036c3-614a-4209-b69f-9a535ea25bac')}
2026-01-22 17:16:43,886 INFO sqlalchemy.engine.Engine INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER)
2026-01-22 17:16:43,886 INFO sqlalchemy.engine.Engine [cached since 0.6415s ago] {'history_id': UUID('a19296f0-7a2a-475f-9458-0d284ea14e22'), 'asset_id': UUID('324036c3-614a-4209-b69f-9a535ea25bac'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 885819), 'rollback_from_version': None}
2026-01-22 17:16:43,901 INFO sqlalchemy.engine.Engine COMMIT
2026-01-22 17:16:43,921 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-22 17:16:43,922 INFO sqlalchemy.engine.Engine SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
2026-01-22 17:16:43,922 INFO sqlalchemy.engine.Engine [cached since 0.6409s ago] {'pk_1': UUID('324036c3-614a-4209-b69f-9a535ea25bac')}
2026-01-22 17:16:43,946 INFO sqlalchemy.engine.Engine ROLLBACK
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:43+0900 DEBUG asyncio request_id=- tenant_id=- trace_id=- mode=- Using selector: EpollSelector taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.647s ago] {'username_1': 'admin@tobit.local'} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.6476s ago] {'asset_id': UUID('324036c3-614a-4209-b69f-9a535ea25bac'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 834108), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 834266)} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- COMMIT taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.6422s ago] {'pk_1': UUID('324036c3-614a-4209-b69f-9a535ea25bac')} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.6415s ago] {'history_id': UUID('a19296f0-7a2a-475f-9458-0d284ea14e22'), 'asset_id': UUID('324036c3-614a-4209-b69f-9a535ea25bac'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 885819), 'rollback_from_version': None} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- COMMIT taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- BEGIN (implicit) taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- [cached since 0.6409s ago] {'pk_1': UUID('324036c3-614a-4209-b69f-9a535ea25bac')} taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO sqlalchemy.engine.Engine request_id=- tenant_id=- trace_id=- mode=- ROLLBACK taskName=None asctime=2026-01-22T17:16:43+0900
2026-01-22T17:16:43+0900 INFO httpx request_id=- tenant_id=- trace_id=- mode=- HTTP Request: POST http://testserver/asset-registry/assets "HTTP/1.1 200 OK" taskName=None asctime=2026-01-22T17:16:43+0900
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_user.username AS tb_user_username, tb_user.password_hash AS tb_user_password_hash, tb_user.role AS tb_user_role, tb_user.tenant_id AS tb_user_tenant_id, tb_user.is_active AS tb_user_is_active, tb_user.last_login_at AS tb_user_last_login_at, tb_user.email_encrypted AS tb_user_email_encrypted, tb_user.phone_encrypted AS tb_user_phone_encrypted, tb_user.id AS tb_user_id, tb_user.created_at AS tb_user_created_at, tb_user.updated_at AS tb_user_updated_at 
FROM tb_user 
WHERE tb_user.username = %(username_1)s::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.647s ago] {'username_1': 'admin@tobit.local'}
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_asset_registry (asset_id, asset_type, name, description, version, status, scope, engine, template, input_schema, output_contract, mapping_type, content, policy_type, limits, query_sql, query_params, query_metadata, screen_id, schema_json, tags, created_by, published_by, published_at, created_at, updated_at) VALUES (%(asset_id)s::UUID, %(asset_type)s::VARCHAR, %(name)s::VARCHAR, %(description)s::VARCHAR, %(version)s::INTEGER, %(status)s::VARCHAR, %(scope)s::VARCHAR, %(engine)s::VARCHAR, %(template)s::VARCHAR, %(input_schema)s::JSON, %(output_contract)s::JSON, %(mapping_type)s::VARCHAR, %(content)s::JSON, %(policy_type)s::VARCHAR, %(limits)s::JSON, %(query_sql)s::VARCHAR, %(query_params)s::JSON, %(query_metadata)s::JSON, %(screen_id)s::VARCHAR, %(schema_json)s::JSON, %(tags)s::JSON, %(created_by)s::VARCHAR, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(created_at)s::TIMESTAMP WITH TIME ZONE, %(updated_at)s::TIMESTAMP WITH TIME ZONE)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.6476s ago] {'asset_id': UUID('324036c3-614a-4209-b69f-9a535ea25bac'), 'asset_type': 'screen', 'name': 'Test Screen', 'description': 'Test', 'version': 1, 'status': 'draft', 'scope': None, 'engine': None, 'template': None, 'input_schema': Json(None), 'output_contract': Json(None), 'mapping_type': None, 'content': Json(None), 'policy_type': None, 'limits': Json(None), 'query_sql': None, 'query_params': Json(None), 'query_metadata': Json(None), 'screen_id': 'test-screen', 'schema_json': Json({'screen_id': 'test-screen', 'layou ... (105 chars)), 'tags': Json(None), 'created_by': None, 'published_by': None, 'published_at': None, 'created_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 834108), 'updated_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 834266)}
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id, tb_asset_registry.asset_type, tb_asset_registry.name, tb_asset_registry.description, tb_asset_registry.version, tb_asset_registry.status, tb_asset_registry.scope, tb_asset_registry.engine, tb_asset_registry.template, tb_asset_registry.input_schema, tb_asset_registry.output_contract, tb_asset_registry.mapping_type, tb_asset_registry.content, tb_asset_registry.policy_type, tb_asset_registry.limits, tb_asset_registry.query_sql, tb_asset_registry.query_params, tb_asset_registry.query_metadata, tb_asset_registry.screen_id, tb_asset_registry.schema_json, tb_asset_registry.tags, tb_asset_registry.created_by, tb_asset_registry.published_by, tb_asset_registry.published_at, tb_asset_registry.created_at, tb_asset_registry.updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.6422s ago] {'pk_1': UUID('324036c3-614a-4209-b69f-9a535ea25bac')}
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tb_asset_version_history (history_id, asset_id, version, snapshot, published_by, published_at, rollback_from_version) VALUES (%(history_id)s::UUID, %(asset_id)s::UUID, %(version)s::INTEGER, %(snapshot)s::JSON, %(published_by)s::VARCHAR, %(published_at)s::TIMESTAMP WITH TIME ZONE, %(rollback_from_version)s::INTEGER)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.6415s ago] {'history_id': UUID('a19296f0-7a2a-475f-9458-0d284ea14e22'), 'asset_id': UUID('324036c3-614a-4209-b69f-9a535ea25bac'), 'version': 1, 'snapshot': Json({'schema_json': {'state': {'initial ... (168 chars)), 'published_by': None, 'published_at': datetime.datetime(2026, 1, 22, 17, 16, 43, 885819), 'rollback_from_version': None}
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tb_asset_registry.asset_id AS tb_asset_registry_asset_id, tb_asset_registry.asset_type AS tb_asset_registry_asset_type, tb_asset_registry.name AS tb_asset_registry_name, tb_asset_registry.description AS tb_asset_registry_description, tb_asset_registry.version AS tb_asset_registry_version, tb_asset_registry.status AS tb_asset_registry_status, tb_asset_registry.scope AS tb_asset_registry_scope, tb_asset_registry.engine AS tb_asset_registry_engine, tb_asset_registry.template AS tb_asset_registry_template, tb_asset_registry.input_schema AS tb_asset_registry_input_schema, tb_asset_registry.output_contract AS tb_asset_registry_output_contract, tb_asset_registry.mapping_type AS tb_asset_registry_mapping_type, tb_asset_registry.content AS tb_asset_registry_content, tb_asset_registry.policy_type AS tb_asset_registry_policy_type, tb_asset_registry.limits AS tb_asset_registry_limits, tb_asset_registry.query_sql AS tb_asset_registry_query_sql, tb_asset_registry.query_params AS tb_asset_registry_query_params, tb_asset_registry.query_metadata AS tb_asset_registry_query_metadata, tb_asset_registry.screen_id AS tb_asset_registry_screen_id, tb_asset_registry.schema_json AS tb_asset_registry_schema_json, tb_asset_registry.tags AS tb_asset_registry_tags, tb_asset_registry.created_by AS tb_asset_registry_created_by, tb_asset_registry.published_by AS tb_asset_registry_published_by, tb_asset_registry.published_at AS tb_asset_registry_published_at, tb_asset_registry.created_at AS tb_asset_registry_created_at, tb_asset_registry.updated_at AS tb_asset_registry_updated_at 
FROM tb_asset_registry 
WHERE tb_asset_registry.asset_id = %(pk_1)s::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.6409s ago] {'pk_1': UUID('324036c3-614a-4209-b69f-9a535ea25bac')}
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/asset-registry/assets "HTTP/1.1 200 OK"
_______________ test_list_maintenance_filtered_with_state_patch ________________
tests/test_ui_actions_with_traces.py:68: in test_list_maintenance_filtered_with_state_patch
    with patch('app.modules.ops.services.action_registry.get_pg_connection') as mock_pg_func, \
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1431: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.modules.ops.services.action_registry' from '/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/action_registry.py'> does not have the attribute 'get_pg_connection'
---------------------------- Captured stderr setup -----------------------------
2026-01-22T17:16:45+0900 DEBUG asyncio request_id=- tenant_id=- trace_id=- mode=- Using selector: EpollSelector taskName=None asctime=2026-01-22T17:16:45+0900
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
2026-01-22T17:16:45+0900 INFO ActionRegistry request_id=- tenant_id=- trace_id=- mode=- Registered action handler: fetch_device_detail taskName=Task-852 asctime=2026-01-22T17:16:45+0900
2026-01-22T17:16:45+0900 INFO ActionRegistry request_id=- tenant_id=- trace_id=- mode=- Registered action handler: list_maintenance_filtered taskName=Task-852 asctime=2026-01-22T17:16:45+0900
2026-01-22T17:16:45+0900 INFO ActionRegistry request_id=- tenant_id=- trace_id=- mode=- Registered action handler: create_maintenance_ticket taskName=Task-852 asctime=2026-01-22T17:16:45+0900
2026-01-22T17:16:45+0900 INFO ActionRegistry request_id=- tenant_id=- trace_id=- mode=- Registered action handler: open_maintenance_modal taskName=Task-852 asctime=2026-01-22T17:16:45+0900
2026-01-22T17:16:45+0900 INFO ActionRegistry request_id=- tenant_id=- trace_id=- mode=- Registered action handler: close_maintenance_modal taskName=Task-852 asctime=2026-01-22T17:16:45+0900
------------------------------ Captured log call -------------------------------
INFO     ActionRegistry:action_registry.py:51 Registered action handler: fetch_device_detail
INFO     ActionRegistry:action_registry.py:51 Registered action handler: list_maintenance_filtered
INFO     ActionRegistry:action_registry.py:51 Registered action handler: create_maintenance_ticket
INFO     ActionRegistry:action_registry.py:51 Registered action handler: open_maintenance_modal
INFO     ActionRegistry:action_registry.py:51 Registered action handler: close_maintenance_modal
_______________ test_create_maintenance_ticket_with_state_patch ________________
tests/test_ui_actions_with_traces.py:138: in test_create_maintenance_ticket_with_state_patch
    with patch('app.modules.ops.services.action_registry.get_pg_connection') as mock_pg_func, \
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1431: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.modules.ops.services.action_registry' from '/home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/action_registry.py'> does not have the attribute 'get_pg_connection'
---------------------------- Captured stderr setup -----------------------------
2026-01-22T17:16:45+0900 DEBUG asyncio request_id=- tenant_id=- trace_id=- mode=- Using selector: EpollSelector taskName=None asctime=2026-01-22T17:16:45+0900
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

schemas/api_manager.py:41
schemas/api_manager.py:41
  /home/spa/tobit-spa-ai/apps/api/schemas/api_manager.py:41: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

.venv/lib/python3.12/site-packages/sqlmodel/main.py:534
.venv/lib/python3.12/site-packages/sqlmodel/main.py:534
.venv/lib/python3.12/site-packages/sqlmodel/main.py:534
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlmodel/main.py:534: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    new_cls = super().__new__(cls, name, bases, dict_used, **config_kwargs)

app/modules/cep_builder/schemas.py:18
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:18: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("trigger_spec", "action_spec", pre=True, always=True)

app/modules/cep_builder/schemas.py:39
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:39: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("trigger_spec", "action_spec", pre=True, always=True)

app/modules/cep_builder/schemas.py:55
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:55: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("rule_id", pre=True, always=True)

app/modules/cep_builder/schemas.py:95
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:95: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("exec_id", "rule_id", pre=True, always=True)

app/modules/cep_builder/schemas.py:112
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:112: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("headers", "trigger", "policy", pre=True, always=True)

app/modules/cep_builder/schemas.py:134
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:134: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("headers", "trigger", "policy", pre=True, always=True)

app/modules/cep_builder/schemas.py:150
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:150: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("notification_id", pre=True, always=True)

app/modules/cep_builder/schemas.py:173
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:173: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("log_id", "notification_id", pre=True, always=True)

app/modules/api_manager/schemas.py:48
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:48: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("api_name", "method", "endpoint")

app/modules/api_manager/schemas.py:52
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:52: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("param_schema", pre=True, always=True)

app/modules/api_manager/schemas.py:56
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:56: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("runtime_policy", pre=True, always=True)

app/modules/api_manager/schemas.py:60
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:60: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("logic_spec", pre=True, always=True)

app/modules/api_manager/schemas.py:78
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:78: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("api_name", "method", "endpoint", pre=True)

app/modules/api_manager/schemas.py:82
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:82: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("param_schema", pre=True)

app/modules/api_manager/schemas.py:88
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:88: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("runtime_policy", pre=True)

app/modules/api_manager/schemas.py:94
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:94: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("logic_spec", pre=True)

app/modules/api_manager/schemas.py:101
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:101: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ApiDefinitionRead(BaseModel):

app/modules/api_manager/schemas.py:201
  /home/spa/tobit-spa-ai/apps/api/app/modules/api_manager/schemas.py:201: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ApiExecLogRead(BaseModel):

main.py:82
  /home/spa/tobit-spa-ai/apps/api/main.py:82: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

.venv/lib/python3.12/site-packages/fastapi/applications.py:4576
.venv/lib/python3.12/site-packages/fastapi/applications.py:4576
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/fastapi/applications.py:4576: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

main.py:119
  /home/spa/tobit-spa-ai/apps/api/main.py:119: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("shutdown")

tests/test_audit_log.py: 2 warnings
tests/test_operation_settings.py: 3 warnings
tests/test_ops_executor_tool_contracts.py: 1 warning
tests/test_ops_service.py: 9 warnings
tests/test_trace_id.py: 3 warnings
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/pydantic/fields.py:747: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return fac()

tests/test_audit_log.py: 3 warnings
tests/test_health.py: 1 warning
tests/test_hello.py: 1 warning
tests/test_operation_settings.py: 8 warnings
tests/test_trace_id.py: 4 warnings
  /home/spa/tobit-spa-ai/apps/api/schemas/common.py:24: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return cls(time=datetime.utcnow(), code=code, message=message, data=data)

tests/test_ci_list_llm_output.py::test_llm_list_payload_forces_list_intent
tests/test_ci_list_llm_output.py::test_llm_list_default_limit_applies
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:478: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.list = plan.list.copy(update={"enabled": True, "limit": limit_int, "offset": offset_int})

tests/test_ci_list_llm_output.py::test_llm_list_payload_forces_list_intent
tests/test_ci_list_llm_output.py::test_llm_list_default_limit_applies
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:480: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.output = plan.output.copy(update={"blocks": ["table"], "primary": "table"})

tests/test_ci_list_llm_output.py::test_llm_list_payload_forces_list_intent
tests/test_ci_list_llm_output.py::test_llm_list_default_limit_applies
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:481: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.primary = plan.primary.copy(update={"keywords": []})

tests/test_ci_list_llm_output.py::test_llm_list_payload_forces_list_intent
tests/test_ci_list_llm_output.py::test_llm_list_default_limit_applies
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:482: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.secondary = plan.secondary.copy(update={"keywords": []})

tests/test_ci_runner_tool_contracts.py::TestToolCallContract::test_tool_call_serialization
  /home/spa/tobit-spa-ai/apps/api/tests/test_ci_runner_tool_contracts.py:49: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    call_dict = tool_call.dict()

tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_multiple_tool_calls_accumulation
tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_multiple_tool_calls_accumulation
tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_multiple_tool_calls_accumulation
  /home/spa/tobit-spa-ai/apps/api/tests/test_ci_runner_tool_contracts.py:102: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    serialized = [call.dict() for call in tool_calls]

tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_tool_calls_with_errors
tests/test_ci_runner_tool_contracts.py::TestToolCallTrace::test_tool_calls_with_errors
  /home/spa/tobit-spa-ai/apps/api/tests/test_ci_runner_tool_contracts.py:131: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    call_dicts = [call.dict() for call in tool_calls]

tests/test_operation_settings.py::test_update_ops_mode_setting
tests/test_operation_settings.py::test_update_boolean_setting
tests/test_operation_settings.py::test_setting_persistence_across_requests
  /home/spa/tobit-spa-ai/apps/api/app/modules/operation_settings/crud.py:52: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/test_ops_executor_tool_contracts.py::TestExecutorResultStructure::test_executor_result_serialization
  /home/spa/tobit-spa-ai/apps/api/tests/test_ops_executor_tool_contracts.py:65: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    result_dict = result.dict()

tests/test_ops_executor_tool_contracts.py::TestExecutorBackwardCompatibility::test_normalize_real_result_with_executor_result
tests/test_ops_service.py::test_handle_ops_query_real_mode_fallbacks_and_flags_error
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/metric_executor.py:63: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    blocks=[markdown.dict()],

tests/test_ops_executor_tool_contracts.py::TestToolCallSerialization::test_executor_result_tool_calls_serialize_correctly
  /home/spa/tobit-spa-ai/apps/api/tests/test_ops_executor_tool_contracts.py:194: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    serialized = result.dict()

tests/test_ops_executor_tool_contracts.py::TestReferenceExtraction::test_reference_extraction_from_references_block
  /home/spa/tobit-spa-ai/apps/api/tests/test_ops_executor_tool_contracts.py:226: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    block_dict = references_block.dict()

tests/test_ops_executor_tool_contracts.py::TestReferenceExtraction::test_empty_references_handling
tests/test_ops_executor_tool_contracts.py::TestReferenceExtraction::test_empty_references_handling
  /home/spa/tobit-spa-ai/apps/api/tests/test_ops_executor_tool_contracts.py:245: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    blocks_dict = [block.dict() if hasattr(block, "dict") else block for block in blocks]

tests/test_ops_service.py::test_ops_metric_real_blocks_shape
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/metric_executor.py:127: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    references.append(item.dict())

tests/test_ops_service.py::test_ops_metric_real_blocks_shape
tests/test_ops_service.py::test_ops_metric_real_blocks_shape
tests/test_ops_service.py::test_ops_metric_real_blocks_shape
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/metric_executor.py:130: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    blocks_dict = [block.dict() if hasattr(block, "dict") else block for block in blocks]

tests/test_ops_service.py::test_ops_hist_real_blocks_shape
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/hist_executor.py:123: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    references_list.append(item.dict())

tests/test_ops_service.py::test_ops_hist_real_blocks_shape
tests/test_ops_service.py::test_ops_hist_real_blocks_shape
tests/test_ops_service.py::test_ops_hist_real_blocks_shape
tests/test_ops_service.py::test_ops_hist_real_blocks_shape
tests/test_ops_service.py::test_ops_hist_real_blocks_shape
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/hist_executor.py:126: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    blocks_dict = [block.dict() if hasattr(block, "dict") else block for block in blocks]

tests/test_ops_service.py::test_ops_graph_real_blocks_shape
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/graph_executor.py:131: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    references_list.append(item.dict())

tests/test_ops_service.py::test_ops_graph_real_blocks_shape
tests/test_ops_service.py::test_ops_graph_real_blocks_shape
tests/test_ops_service.py::test_ops_graph_real_blocks_shape
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/executors/graph_executor.py:137: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    blocks_dict = [block.dict() if hasattr(block, "dict") else block for block in blocks]

tests/test_plan_multistep.py: 13 warnings
tests/test_trace_id.py: 1 warning
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/validator.py:348: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    normalized = plan.copy()

tests/test_plan_multistep.py::TestPlanValidation::test_validate_simple_plan_success
tests/test_plan_multistep.py::TestPlanValidation::test_validate_with_custom_budget
tests/test_plan_multistep.py::TestPlanValidation::test_validate_multistep_disabled
tests/test_plan_multistep.py::TestPlanValidation::test_validate_complex_plan
tests/test_plan_multistep.py::TestPlanValidation::test_validate_timeout_valid_range
tests/test_plan_multistep.py::TestPlanValidation::test_validate_max_depth_valid_range
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/validator.py:388: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    "primary": normalized.primary.copy(update={"limit": primary_limit}),

tests/test_plan_multistep.py::TestPlanValidation::test_validate_simple_plan_success
tests/test_plan_multistep.py::TestPlanValidation::test_validate_with_custom_budget
tests/test_plan_multistep.py::TestPlanValidation::test_validate_multistep_disabled
tests/test_plan_multistep.py::TestPlanValidation::test_validate_complex_plan
tests/test_plan_multistep.py::TestPlanValidation::test_validate_timeout_valid_range
tests/test_plan_multistep.py::TestPlanValidation::test_validate_max_depth_valid_range
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/validator.py:390: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    "graph": normalized.graph.copy(update={"view": graph_view, "depth": clamped_depth}),

tests/test_plan_multistep.py::TestPlanValidation::test_validate_simple_plan_success
tests/test_plan_multistep.py::TestPlanValidation::test_validate_with_custom_budget
tests/test_plan_multistep.py::TestPlanValidation::test_validate_multistep_disabled
tests/test_plan_multistep.py::TestPlanValidation::test_validate_complex_plan
tests/test_plan_multistep.py::TestPlanValidation::test_validate_timeout_valid_range
tests/test_plan_multistep.py::TestPlanValidation::test_validate_max_depth_valid_range
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/validator.py:386: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    normalized = normalized.copy(

tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_save_draft_requires_auth
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_invalid_token_rejected
tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_missing_authorization_header_error
  /home/spa/tobit-spa-ai/apps/api/core/auth.py:42: DeprecationWarning: 
           You probably want to use `session.exec()` instead of `session.query()`.
  
          `session.exec()` is SQLModel's own short version with increased type
          annotations.
  
          Or otherwise you might want to use `session.execute()` instead of
          `session.query()`.
          
    session.query(TbUser).filter(TbUser.username == "admin@tobit.local")

tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_save_draft_requires_auth
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlmodel/orm/session.py:81: SADeprecationWarning: Object <sqlalchemy.orm.query.Query object at 0x7f7b7fcb8cb0> should not be used directly in a SQL statement context, such as passing to methods such as session.execute().  This usage will be disallowed in a future release.  Please use Core select() / update() / delete() etc. with Session.execute() and other statement execution methods.
    results = super().execute(

tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_invalid_token_rejected
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlmodel/orm/session.py:81: SADeprecationWarning: Object <sqlalchemy.orm.query.Query object at 0x7f7b7de7cdd0> should not be used directly in a SQL statement context, such as passing to methods such as session.execute().  This usage will be disallowed in a future release.  Please use Core select() / update() / delete() etc. with Session.execute() and other statement execution methods.
    results = super().execute(

tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_missing_authorization_header_error
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlmodel/orm/session.py:81: SADeprecationWarning: Object <sqlalchemy.orm.query.Query object at 0x7f7b7de80ce0> should not be used directly in a SQL statement context, such as passing to methods such as session.execute().  This usage will be disallowed in a future release.  Please use Core select() / update() / delete() etc. with Session.execute() and other statement execution methods.
    results = super().execute(

tests/test_security_headers.py::TestCSRFMiddleware::test_csrf_token_in_header
tests/test_security_headers.py::TestCSRFMiddleware::test_csrf_token_mismatch
tests/test_security_headers.py::TestIntegration::test_full_security_stack
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/starlette/testclient.py:445: DeprecationWarning: Setting per-request cookies=<...> is being deprecated, because the expected behaviour on cookie persistence is ambiguous. Set cookies directly on the client instance instead.
    return super().request(

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:502: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.primary = plan.primary.copy(update={"keywords": keywords})

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:512: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.aggregate = plan.aggregate.copy(update={"filters": aggregate_filters})

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:518: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.secondary = plan.secondary.copy(update={"keywords": _extract_keywords(secondary_text)})

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:542: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan.graph = plan.graph.copy(update={"user_requested_depth": requested_depth})

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/planner/planner_llm.py:571: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    plan = plan.copy(update={"output": plan.output.copy(update=_build_output_updates(output_types))})

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/orchestrator/runner.py:359: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    meta["row_count"] = len(result.records)

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/orchestrator/runner.py:958: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    trace = {

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/orchestrator/runner.py:959: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    "plan_raw": self.plan_raw.dict(),

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/services/ci/orchestrator/runner.py:961: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    "policy_decisions": self.plan_trace.get("policy_decisions"),

tests/test_trace_id.py::test_ops_ci_ask_includes_trace_id
  /home/spa/tobit-spa-ai/apps/api/app/modules/ops/router.py:408: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    response_payload = ResponseEnvelope.success(data=response.dict())

tests/test_ui_actions_with_traces.py::test_create_maintenance_ticket_with_state_patch
  /home/spa/tobit-spa-ai/apps/api/tests/test_ui_actions_with_traces.py:124: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    parent_trace_id = f"screen-render-{datetime.utcnow().timestamp()}"

tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_json
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_chunks_format_selection
  /home/spa/tobit-spa-ai/apps/api/app/modules/document_processor/services/export_service.py:47: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "exported_at": datetime.utcnow().isoformat(),

tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_markdown
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_chunks_format_selection
  /home/spa/tobit-spa-ai/apps/api/app/modules/document_processor/services/export_service.py:108: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    f"Exported: {datetime.utcnow().strftime('%Y-%m-%d %H:%M:%S')}",

tests/unit/test_document_processor.py::TestDocumentExportService::test_export_to_text
tests/unit/test_document_processor.py::TestDocumentExportService::test_export_chunks_format_selection
  /home/spa/tobit-spa-ai/apps/api/app/modules/document_processor/services/export_service.py:150: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    f"Exported: {datetime.utcnow().strftime('%Y-%m-%d %H:%M:%S')}",

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_asset_models.py::TestResolverAsset::test_alias_mapping_creation
FAILED tests/test_asset_models.py::TestResolverAsset::test_pattern_rule_creation
FAILED tests/test_asset_models.py::TestResolverAsset::test_transformation_rule_creation
FAILED tests/test_asset_models.py::TestResolverAsset::test_resolver_rule_with_alias
FAILED tests/test_asset_models.py::TestResolverAsset::test_resolver_config_creation
FAILED tests/test_asset_models.py::TestResolverAsset::test_resolver_config_get_rule_by_name
FAILED tests/test_asset_models.py::TestResolverAsset::test_resolver_config_get_rules_by_type
FAILED tests/test_asset_models.py::TestResolverAsset::test_resolver_config_add_remove_rule
FAILED tests/test_asset_models.py::TestResolverAsset::test_resolver_asset_creation
FAILED tests/test_asset_models.py::TestResolverAsset::test_rule_priority_ordering
FAILED tests/test_asset_models.py::TestAssetIntegration::test_source_to_schema_reference
FAILED tests/test_asset_models.py::TestAssetIntegration::test_resolver_with_multiple_rule_types
FAILED tests/test_ops_service.py::test_ops_all_real_blocks_shape - AssertionE...
FAILED tests/test_ops_service.py::test_ops_all_langgraph_without_key_falls_back
FAILED tests/test_ops_service.py::test_ops_all_partial_failure - assert ('Err...
FAILED tests/test_permissions.py::TestRolePermissions::test_manager_permissions
FAILED tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_save_draft_requires_auth
FAILED tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_invalid_token_rejected
FAILED tests/test_screen_editor_auth.py::TestScreenEditorAuth::test_missing_authorization_header_error
FAILED tests/test_ui_actions_with_traces.py::test_list_maintenance_filtered_with_state_patch
FAILED tests/test_ui_actions_with_traces.py::test_create_maintenance_ticket_with_state_patch
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_create_api_key - sqlalchem...
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_create_api_key_with_expiration
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_valid - s...
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_invalid
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_expired
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_validate_api_key_inactive
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_get_api_key - sqlalchemy.e...
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_get_api_key_wrong_user - s...
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_list_api_keys - sqlalchemy...
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_list_api_keys_exclude_inactive
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_list_api_keys_include_inactive
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_revoke_api_key - sqlalchem...
ERROR tests/test_api_keys.py::TestApiKeyCrud::test_revoke_nonexistent_key - s...
ERROR tests/test_api_keys.py::TestApiKeyScopes::test_get_api_key_scopes - sql...
ERROR tests/test_api_keys.py::TestApiKeyScopes::test_has_scope_true - sqlalch...
ERROR tests/test_api_keys.py::TestApiKeyScopes::test_has_scope_false - sqlalc...
ERROR tests/test_api_keys.py::TestApiKeysRouter::test_create_api_key_endpoint
ERROR tests/test_api_keys.py::TestApiKeysRouter::test_list_api_keys_endpoint
ERROR tests/test_api_keys.py::TestApiKeysRouter::test_revoke_api_key_endpoint
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_create_change_basic
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_create_change_minimal
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_create_change_all_types
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_get_change_by_id
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_get_change_not_found
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_all
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_filter_by_ci_id
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_filter_by_status
ERROR tests/test_ci_management.py::TestCIChangeCreation::test_list_changes_pagination
ERROR tests/test_ci_management.py::TestCIChangeApproval::test_approve_change
ERROR tests/test_ci_management.py::TestCIChangeApproval::test_reject_change
ERROR tests/test_ci_management.py::TestCIChangeApproval::test_approve_non_existent_change
ERROR tests/test_ci_management.py::TestCIChangeApproval::test_apply_change
ERROR tests/test_ci_management.py::TestCIChangeApproval::test_apply_unapproved_change_fails
ERROR tests/test_ci_management.py::TestCIChangeHistory::test_get_change_history_single_ci
ERROR tests/test_ci_management.py::TestCIChangeHistory::test_change_history_counts
ERROR tests/test_ci_management.py::TestCIChangeHistory::test_change_history_pending_approvals
ERROR tests/test_ci_management.py::TestCIIntegrityValidation::test_create_integrity_issue
ERROR tests/test_ci_management.py::TestCIIntegrityValidation::test_get_integrity_issues
ERROR tests/test_ci_management.py::TestCIIntegrityValidation::test_filter_integrity_issues_unresolved
ERROR tests/test_ci_management.py::TestCIIntegrityValidation::test_resolve_integrity_issue
ERROR tests/test_ci_management.py::TestCIIntegrityValidation::test_validate_ci_integrity
ERROR tests/test_ci_management.py::TestCIIntegrityValidation::test_get_integrity_summary
ERROR tests/test_ci_management.py::TestCIDuplicateDetection::test_create_duplicate_entry
ERROR tests/test_ci_management.py::TestCIDuplicateDetection::test_get_duplicates_for_ci
ERROR tests/test_ci_management.py::TestCIDuplicateDetection::test_confirm_duplicate
ERROR tests/test_ci_management.py::TestCIDuplicateDetection::test_duplicate_statistics
ERROR tests/test_ci_management.py::TestCIChangeStatistics::test_get_change_statistics
ERROR tests/test_ci_management.py::TestCIChangeStatistics::test_change_statistics_time_range
ERROR tests/test_ci_management.py::TestCIIntegrationWorkflow::test_complete_change_workflow
ERROR tests/test_ci_management.py::TestCIIntegrationWorkflow::test_duplicate_detection_to_merge_workflow
ERROR tests/test_ci_management.py::TestCIIntegrationWorkflow::test_integrity_validation_workflow
ERROR tests/test_ci_management.py::TestTenantIsolation::test_changes_isolated_by_tenant
ERROR tests/test_ci_management.py::TestTenantIsolation::test_issues_isolated_by_tenant
ERROR tests/test_ci_management.py::TestTenantIsolation::test_duplicates_isolated_by_tenant
ERROR tests/test_documents.py::test_upload_creates_metadata_and_list - sqlalc...
ERROR tests/test_documents.py::test_document_stream_done_contains_references
ERROR tests/test_permissions.py::TestRolePermissions::test_initialize_role_permissions
ERROR tests/test_permissions.py::TestPermissionChecks::test_admin_check_permission
ERROR tests/test_permissions.py::TestPermissionChecks::test_developer_can_create_api
ERROR tests/test_permissions.py::TestPermissionChecks::test_developer_cannot_delete_api
ERROR tests/test_permissions.py::TestPermissionChecks::test_viewer_can_read
ERROR tests/test_permissions.py::TestPermissionChecks::test_viewer_cannot_write
ERROR tests/test_permissions.py::TestResourcePermissions::test_grant_resource_permission
ERROR tests/test_permissions.py::TestResourcePermissions::test_grant_resource_type_permission
ERROR tests/test_permissions.py::TestResourcePermissions::test_check_resource_specific_permission
ERROR tests/test_permissions.py::TestResourcePermissions::test_check_resource_type_permission
ERROR tests/test_permissions.py::TestResourcePermissions::test_revoke_resource_permission
ERROR tests/test_permissions.py::TestPermissionExpiration::test_expired_permission_denied
ERROR tests/test_permissions.py::TestPermissionExpiration::test_future_permission_allowed
ERROR tests/test_permissions.py::TestListPermissions::test_list_user_permissions
===== 21 failed, 294 passed, 7 skipped, 178 warnings, 70 errors in 49.96s ======
