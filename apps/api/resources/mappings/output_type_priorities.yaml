asset_type: mapping
name: output_type_priorities
scope: planner
description: Output type selection priorities and rules based on query intent
version: 1
status: published

content:
  # Global output type priority ranking
  global_priorities:
    - "network"      # Graph visualization
    - "chart"        # Charts (bar, line, pie, etc.)
    - "table"        # Tabular data
    - "number"       # Single metric/number
    - "text"         # Text/markdown

  # Output type selection by intent
  intent_output_types:
    metric:
      priorities: ["number", "chart", "table"]
      best_for:
        single_metric: "number"
        time_series: "chart"
        multiple_metrics: "table"
      fallback: "text"

    graph:
      priorities: ["network", "chart", "table"]
      best_for:
        dependency: "network"
        topology: "network"
        path: "network"
        impact: "network"
        neighbors: "table"
      fallback: "text"

    aggregate:
      priorities: ["table", "chart", "number"]
      best_for:
        count: "number"
        summary: "table"
        trend: "chart"
      fallback: "text"

    list:
      priorities: ["table", "text"]
      best_for:
        structured: "table"
        unstructured: "text"
      fallback: "text"

    search:
      priorities: ["table", "text"]
      best_for:
        entity_search: "table"
        text_search: "text"
      fallback: "text"

    history:
      priorities: ["chart", "table", "text"]
      best_for:
        time_series: "chart"
        event_log: "table"
        narrative: "text"
      fallback: "text"

    auto:
      priorities: ["network", "table", "chart"]
      best_for:
        any: "auto"  # Let system decide
      fallback: "text"

  # Output type characteristics
  output_type_characteristics:
    network:
      description: "Graph/network visualization"
      best_for_cardinality: "low_to_medium"
      scalability: "up_to_100_nodes"
      interactive: true
      suitable_dimensions: 2

    chart:
      description: "Bar, line, pie, area charts"
      best_for_cardinality: "low_to_high"
      scalability: "up_to_1000_points"
      interactive: true
      suitable_dimensions: 3

    table:
      description: "Tabular data with columns"
      best_for_cardinality: "medium_to_high"
      scalability: "up_to_10000_rows"
      interactive: true
      suitable_dimensions: "many"

    number:
      description: "Single number or metric"
      best_for_cardinality: "single_value"
      scalability: "unlimited"
      interactive: false
      suitable_dimensions: 1

    text:
      description: "Markdown text or prose"
      best_for_cardinality: "any"
      scalability: "unlimited"
      interactive: false
      suitable_dimensions: "any"

  # Size-based recommendations
  size_rules:
    # Number of records
    result_size:
      0_to_5: ["number", "network", "text"]
      5_to_50: ["network", "table", "chart"]
      50_to_500: ["table", "chart"]
      500_to_5000: ["table", "chart"]
      5000_plus: ["table", "chart"]

    # Number of dimensions
    cardinality:
      single: ["number", "text"]
      small: ["network", "chart", "table"]
      medium: ["chart", "table"]
      large: ["table", "chart"]
      very_large: ["table"]

  # Keyword-based output type selection
  keyword_output_mapping:
    # Graph-related
    "그래프": "network"
    "그림": "network"
    "토폴로지": "network"
    "구조": "network"
    "관계": "network"

    # Chart-related
    "차트": "chart"
    "그래프": "chart"
    "추세": "chart"
    "변화": "chart"
    "증감": "chart"

    # Table-related
    "테이블": "table"
    "목록": "table"
    "리스트": "table"
    "표": "table"
    "데이터": "table"

    # Number-related
    "개수": "number"
    "몇": "number"
    "얼마": "number"
    "숫자": "number"
    "총": "number"

    # Text-related
    "설명": "text"
    "말해": "text"
    "어떻게": "text"
    "왜": "text"
    "이유": "text"

  # Fallback strategy
  fallback_strategy: "text"  # Default to text if no suitable type found

  # Multi-output rules
  allow_multiple_outputs: true
  max_outputs: 3
  output_combination_rules:
    - ["number", "chart"]
    - ["network", "table"]
    - ["chart", "table"]
    - ["number", "text"]

  # Context-specific rules
  context_rules:
    real_time: "number"
    historical: "chart"
    analytical: "table"
    exploratory: "network"
    reporting: "chart"
    documentation: "text"
