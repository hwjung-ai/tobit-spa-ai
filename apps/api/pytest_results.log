============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /home/spa/tobit-spa-ai/apps/api/.venv/bin/python3.12
cachedir: .pytest_cache
rootdir: /home/spa/tobit-spa-ai/apps/api
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.12.1, langsmith-0.6.3, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 223 items / 15 errors

==================================== ERRORS ====================================
___________________ ERROR collecting tests/test_api_keys.py ____________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_api_keys.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_api_keys.py:21: in <module>
    from main import app
main.py:10: in <module>
    from api.routes.chat import router as chat_router
api/__init__.py:17: in <module>
    from .routes.chat import router as chat_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:24: in <module>
    from .schemas import (
app/modules/ops/schemas.py:9: in <module>
    from app.modules.ops.services.ci.planner.plan_schema import Plan, View
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:12: in <module>
    from app.modules.cep_builder.crud import get_rule, record_exec_log
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
___________________ ERROR collecting tests/test_audit_log.py ___________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_audit_log.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_audit_log.py:9: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
__________________ ERROR collecting tests/test_chat_stream.py __________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_chat_stream.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_chat_stream.py:5: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
______________ ERROR collecting tests/test_ci_exact_candidate.py _______________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_ci_exact_candidate.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_ci_exact_candidate.py:8: in <module>
    from app.modules.ops.services.ci.orchestrator.runner import _find_exact_candidate
app/modules/ops/services/ci/orchestrator/__init__.py:3: in <module>
    from .runner import CIOrchestratorRunner
app/modules/ops/services/ci/orchestrator/runner.py:25: in <module>
    from app.modules.ops.services.ci.orchestrator.compositions import (
app/modules/ops/services/ci/orchestrator/compositions.py:3: in <module>
    from app.modules.ops.services.ci.orchestrator.tool_composition import (
app/modules/ops/services/ci/orchestrator/tool_composition.py:8: in <module>
    from app.modules.ops.services.ci.tools.base import ToolType
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
_________________ ERROR collecting tests/test_control_loop.py __________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_control_loop.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_control_loop.py:17: in <module>
    from app.modules.ops.services.control_loop import (
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
___________________ ERROR collecting tests/test_documents.py ___________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_documents.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_documents.py:21: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
____________________ ERROR collecting tests/test_health.py _____________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_health.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_health.py:3: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
_____________________ ERROR collecting tests/test_hello.py _____________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_hello.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_hello.py:3: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
______________ ERROR collecting tests/test_langgraph_advanced.py _______________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_langgraph_advanced.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_langgraph_advanced.py:10: in <module>
    from app.modules.ops.services.langgraph_advanced import (
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
______________ ERROR collecting tests/test_operation_settings.py _______________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_operation_settings.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_operation_settings.py:5: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
__________________ ERROR collecting tests/test_ops_service.py __________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_ops_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_ops_service.py:4: in <module>
    from app.modules.ops.services import handle_ops_query
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
______________ ERROR collecting tests/test_screen_editor_auth.py _______________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_screen_editor_auth.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_screen_editor_auth.py:8: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
________________ ERROR collecting tests/test_stage_executor.py _________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_stage_executor.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_stage_executor.py:20: in <module>
    from app.modules.ops.services.ci.orchestrator.stage_executor import StageExecutor
app/modules/ops/services/ci/orchestrator/__init__.py:3: in <module>
    from .runner import CIOrchestratorRunner
app/modules/ops/services/ci/orchestrator/runner.py:25: in <module>
    from app.modules.ops.services.ci.orchestrator.compositions import (
app/modules/ops/services/ci/orchestrator/compositions.py:3: in <module>
    from app.modules.ops.services.ci.orchestrator.tool_composition import (
app/modules/ops/services/ci/orchestrator/tool_composition.py:8: in <module>
    from app.modules.ops.services.ci.tools.base import ToolType
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
___________________ ERROR collecting tests/test_trace_id.py ____________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_trace_id.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_trace_id.py:5: in <module>
    from main import app
main.py:14: in <module>
    from api.routes.history import router as history_router
api/routes/__init__.py:8: in <module>
    from .ops import router as ops_router
api/routes/ops.py:1: in <module>
    from app.modules.ops.router import router
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
__________________ ERROR collecting tests/test_ui_contract.py __________________
ImportError while importing test module '/home/spa/tobit-spa-ai/apps/api/tests/test_ui_contract.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_ui_contract.py:17: in <module>
    from app.modules.ops.services.binding_engine import BindingEngine, BindingError
app/modules/ops/__init__.py:1: in <module>
    from .router import router
app/modules/ops/router.py:35: in <module>
    from .services import handle_ops_query
app/modules/ops/services/__init__.py:33: in <module>
    from .executors.config_executor import run_config as run_config_executor
app/modules/ops/services/executors/__init__.py:2: in <module>
    from .hist_executor import run_hist
app/modules/ops/services/executors/hist_executor.py:20: in <module>
    from ..ci.tools import history as history_tools
app/modules/ops/services/ci/tools/__init__.py:3: in <module>
    from . import cep, ci, graph, history, metric
app/modules/ops/services/ci/tools/cep.py:13: in <module>
    from app.modules.cep_builder.executor import evaluate_trigger
app/modules/cep_builder/__init__.py:1: in <module>
    from .router import router  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
app/modules/cep_builder/router.py:39: in <module>
    from .executor import evaluate_trigger, manual_trigger
app/modules/cep_builder/executor.py:21: in <module>
    from .models import TbCepRule, ApiExecuteResponse
E   ImportError: cannot import name 'ApiExecuteResponse' from 'app.modules.cep_builder.models' (/home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/models.py)
=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

schemas/api_manager.py:41
  /home/spa/tobit-spa-ai/apps/api/schemas/api_manager.py:41: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

.venv/lib/python3.12/site-packages/sqlmodel/main.py:534
.venv/lib/python3.12/site-packages/sqlmodel/main.py:534
.venv/lib/python3.12/site-packages/sqlmodel/main.py:534
  /home/spa/tobit-spa-ai/apps/api/.venv/lib/python3.12/site-packages/sqlmodel/main.py:534: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    new_cls = super().__new__(cls, name, bases, dict_used, **config_kwargs)

app/modules/cep_builder/schemas.py:18
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:18: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("trigger_spec", "action_spec", pre=True, always=True)

app/modules/cep_builder/schemas.py:39
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:39: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("trigger_spec", "action_spec", pre=True, always=True)

app/modules/cep_builder/schemas.py:55
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:55: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("rule_id", pre=True, always=True)

app/modules/cep_builder/schemas.py:95
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:95: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("exec_id", "rule_id", pre=True, always=True)

app/modules/cep_builder/schemas.py:112
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:112: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("headers", "trigger", "policy", pre=True, always=True)

app/modules/cep_builder/schemas.py:134
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:134: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("headers", "trigger", "policy", pre=True, always=True)

app/modules/cep_builder/schemas.py:150
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:150: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("notification_id", pre=True, always=True)

app/modules/cep_builder/schemas.py:173
  /home/spa/tobit-spa-ai/apps/api/app/modules/cep_builder/schemas.py:173: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("log_id", "notification_id", pre=True, always=True)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/test_api_keys.py
ERROR tests/test_audit_log.py
ERROR tests/test_chat_stream.py
ERROR tests/test_ci_exact_candidate.py
ERROR tests/test_control_loop.py
ERROR tests/test_documents.py
ERROR tests/test_health.py
ERROR tests/test_hello.py
ERROR tests/test_langgraph_advanced.py
ERROR tests/test_operation_settings.py
ERROR tests/test_ops_service.py
ERROR tests/test_screen_editor_auth.py
ERROR tests/test_stage_executor.py
ERROR tests/test_trace_id.py
ERROR tests/test_ui_contract.py
!!!!!!!!!!!!!!!!!!! Interrupted: 15 errors during collection !!!!!!!!!!!!!!!!!!!
======================= 13 warnings, 15 errors in 3.67s ========================
