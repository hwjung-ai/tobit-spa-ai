{
  "id": "cep_monitoring",
  "screen_id": "cep_monitoring",
  "name": "CEP Monitoring",
  "version": "4.0",
  "description": "Complex Event Processing monitoring dashboard with rules, events, channels, and error analysis",
  "layout": {
    "type": "stack",
    "direction": "vertical",
    "spacing": 6
  },
  "components": [
    {
      "id": "cep_header",
      "type": "row",
      "label": "Header",
      "props": {
        "gap": 4,
        "align": "center",
        "components": [
          {
            "id": "cep_title_group",
            "type": "column",
            "props": {
              "gap": 1,
              "components": [
                {
                  "id": "cep_title",
                  "type": "text",
                  "props": {
                    "content": "CEP Monitoring Dashboard",
                    "variant": "heading",
                    "fontSize": "2xl",
                    "fontWeight": "semibold"
                  }
                },
                {
                  "id": "cep_subtitle",
                  "type": "text",
                  "props": {
                    "content": "Real-time monitoring of rules, channels, and event processing health",
                    "variant": "muted",
                    "fontSize": "sm"
                  }
                }
              ]
            }
          },
          {
            "id": "cep_live_badge",
            "type": "text",
            "props": {
              "content": "LIVE",
              "fontSize": "xs",
              "fontWeight": "bold",
              "color": "#10b981"
            }
          },
          {
            "id": "cep_refresh_btn",
            "type": "button",
            "label": "Refresh",
            "props": {
              "label": "Refresh",
              "variant": "outline",
              "auto_refresh": {
                "enabled": true,
                "interval_ms": 30000
              }
            },
            "actions": [
              {
                "id": "action_refresh_cep",
                "handler": "fetch_cep_stats",
                "label": "Refresh CEP Stats",
                "payload_template": {
                  "period": "24h"
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "cep_kpi_grid",
      "type": "row",
      "label": "KPI Grid",
      "props": {
        "gap": 4,
        "components": [
          {
            "id": "cep_kpi_rules",
            "type": "keyvalue",
            "label": "Rules Summary",
            "props": {
              "items": [
                {
                  "key": "Total Rules",
                  "value": "{{state.total_rules}}"
                },
                {
                  "key": "Active Rules",
                  "value": "{{state.active_rules}}"
                }
              ]
            }
          },
          {
            "id": "cep_kpi_executions",
            "type": "keyvalue",
            "label": "Executions",
            "props": {
              "items": [
                {
                  "key": "Today",
                  "value": "{{state.today_execution_count}}"
                },
                {
                  "key": "Last 24h",
                  "value": "{{state.last_24h_execution_count}}"
                }
              ]
            }
          },
          {
            "id": "cep_kpi_performance",
            "type": "keyvalue",
            "label": "Performance",
            "props": {
              "items": [
                {
                  "key": "Avg Duration",
                  "value": "{{state.today_avg_duration_ms}}ms"
                },
                {
                  "key": "Error Rate",
                  "value": "{{state.today_error_rate}}"
                }
              ]
            }
          },
          {
            "id": "cep_kpi_alerts",
            "type": "keyvalue",
            "label": "Alerts (24h)",
            "props": {
              "items": [
                {
                  "key": "Today Errors",
                  "value": "{{state.today_error_count}}"
                },
                {
                  "key": "Critical",
                  "value": "{{state.critical_alerts_count}}"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": "cep_middle_section",
      "type": "column",
      "label": "Timeline Section",
      "props": {
        "gap": 3,
        "components": [
          {
            "id": "cep_chart_title",
            "type": "text",
            "props": {
              "content": "Execution & Error Timeline",
              "fontSize": "lg",
              "fontWeight": "semibold"
            }
          },
          {
            "id": "cep_error_timeline_chart",
            "type": "chart",
            "props": {
              "chart_type": "area",
              "data": "{{state.error_timeline}}",
              "x_key": "timestamp",
              "series": [
                {
                  "name": "Errors",
                  "data_key": "error_count",
                  "color": "#f87171"
                },
                {
                  "name": "Executions",
                  "data_key": "execution_count",
                  "color": "#38bdf8"
                }
              ],
              "y_min": 0,
              "height": 250
            }
          }
        ]
      }
    },
    {
      "id": "cep_bottom_grid",
      "type": "row",
      "label": "Bottom Grid",
      "props": {
        "gap": 4,
        "components": [
          {
            "id": "cep_rules_col",
            "type": "column",
            "label": "Rules Performance",
            "props": {
              "gap": 3,
              "components": [
                {
                  "id": "cep_rules_title",
                  "type": "text",
                  "props": {
                    "content": "Rule Performance",
                    "fontSize": "lg",
                    "fontWeight": "semibold"
                  }
                },
                {
                  "id": "cep_rules_table",
                  "type": "table",
                  "props": {
                    "rows": "{{state.cep_rules}}",
                    "columns": [
                      {
                        "field": "rule_name",
                        "header": "Rule Name"
                      },
                      {
                        "field": "execution_count",
                        "header": "Count"
                      },
                      {
                        "field": "error_rate",
                        "header": "Error %"
                      }
                    ],
                    "page_size": 5
                  }
                }
              ]
            }
          },
          {
            "id": "cep_channels_col",
            "type": "column",
            "label": "Channels",
            "props": {
              "gap": 3,
              "components": [
                {
                  "id": "cep_channels_title",
                  "type": "text",
                  "props": {
                    "content": "Notification Channels",
                    "fontSize": "lg",
                    "fontWeight": "semibold"
                  }
                },
                {
                  "id": "cep_channels_table",
                  "type": "table",
                  "props": {
                    "rows": "{{state.channels}}",
                    "columns": [
                      {
                        "field": "display_name",
                        "header": "Channel"
                      },
                      {
                        "field": "total_sent",
                        "header": "Sent"
                      },
                      {
                        "field": "failure_rate",
                        "header": "Fail %"
                      }
                    ],
                    "page_size": 5,
                    "conditional_styles": [
                      {
                        "field": "failure_rate",
                        "operator": "gt",
                        "value": 0.1,
                        "color": "#f87171"
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": "cep_events_section",
      "type": "column",
      "label": "Recent Events",
      "props": {
        "gap": 3,
        "components": [
          {
            "id": "cep_events_title",
            "type": "text",
            "props": {
              "content": "Recent CEP Events (Errors)",
              "fontSize": "lg",
              "fontWeight": "semibold"
            }
          },
          {
            "id": "cep_events_table",
            "type": "table",
            "props": {
              "rows": "{{state.cep_events}}",
              "columns": [
                {
                  "field": "triggered_at",
                  "header": "Time"
                },
                {
                  "field": "severity",
                  "header": "Severity"
                },
                {
                  "field": "rule_name",
                  "header": "Rule"
                },
                {
                  "field": "summary",
                  "header": "Summary"
                }
              ],
              "page_size": 10,
              "conditional_styles": [
                {
                  "field": "severity",
                  "operator": "eq",
                  "value": "critical",
                  "color": "#f87171"
                },
                {
                  "field": "severity",
                  "operator": "eq",
                  "value": "high",
                  "color": "#fbbf24"
                }
              ]
            }
          }
        ]
      }
    }
  ],
  "state": {
    "initial": {
      "total_rules": 0,
      "active_rules": 0,
      "today_execution_count": 0,
      "today_error_count": 0,
      "today_error_rate": 0,
      "today_avg_duration_ms": 0,
      "last_24h_execution_count": 0,
      "no_data_ratio": 0,
      "total_errors": 0,
      "critical_alerts_count": 0,
      "cep_rules": [],
      "cep_events": [],
      "channels": [],
      "error_timeline": [],
      "error_distribution": {},
      "recent_errors": []
    },
    "schema": {
      "total_rules": {
        "type": "number"
      },
      "active_rules": {
        "type": "number"
      },
      "today_execution_count": {
        "type": "number"
      },
      "today_error_count": {
        "type": "number"
      },
      "today_error_rate": {
        "type": "number"
      },
      "today_avg_duration_ms": {
        "type": "number"
      },
      "last_24h_execution_count": {
        "type": "number"
      },
      "no_data_ratio": {
        "type": "number"
      },
      "total_errors": {
        "type": "number"
      },
      "critical_alerts_count": {
        "type": "number"
      },
      "cep_rules": {
        "type": "array"
      },
      "cep_events": {
        "type": "array"
      },
      "channels": {
        "type": "array"
      },
      "error_timeline": {
        "type": "array"
      },
      "error_distribution": {
        "type": "object"
      },
      "recent_errors": {
        "type": "array"
      }
    }
  },
  "metadata": {
    "hide_debug_panels": true,
    "author": "Antigravity",
    "created_at": "2026-02-10",
    "tags": {
      "category": "cep",
      "type": "monitoring"
    }
  },
  "actions": [
    {
      "id": "fetch_cep_stats",
      "label": "Fetch CEP Stats",
      "handler": "fetch_cep_stats",
      "payload_template": {
        "period": "24h"
      }
    }
  ]
}